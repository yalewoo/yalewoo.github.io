<!DOCTYPE html>
<html>
	<head>
		<title>
			Modularity的计算方法——社团检测中模块度计算公式详解  |  雅乐网		</title>
		
		<meta charset="UTF-8" />
		<meta name="renderer" content="webkit">
		<link rel="stylesheet" href="http://www.yalewoo.com/wp-content/themes/YLW3_lite/style.css" type="text/css" />
		<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.yalewoo.com/feed" />


				
		
<!-- All in One SEO Pack 2.3.12.1 by Michael Torbert of Semper Fi Web Design[-1,-1] -->
<meta name="description"  content="Modularity，中文称为模块度，是 Community Detection（社区发现/社团检测） 中用来衡量社区划分质量的一种方法。要理解Modularity，我们先来看社团和社团检测的概念。 社团检测 社团检测，就是要在一个图（包含顶点和边）上发现社团结构，也就是要把图中的结点进行聚类，构成一个个的社团。关" />

<link rel="canonical" href="http://www.yalewoo.com/modularity_community_detection.html" />
<!-- /all in one seo pack -->
<link rel="alternate" type="application/rss+xml" title="雅乐网 &raquo; Modularity的计算方法——社团检测中模块度计算公式详解评论Feed" href="http://www.yalewoo.com/modularity_community_detection.html/feed" />
<link rel='stylesheet' id='crayon-css'  href='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-consolas-css'  href='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/fonts/consolas.css?ver=_2.7.2_beta' type='text/css' media='all' />
<script type='text/javascript' src='https://lib.sinaapp.com/js/jquery/1.8.2/jquery.min.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/www.yalewoo.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"\u4f7f\u7528 %s \u590d\u5236\uff0c\u4f7f\u7528 %s \u7c98\u8d34\u3002","minimize":"\u70b9\u51fb\u5c55\u5f00\u4ee3\u7801"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta'></script>
<link rel='prev' title='网络下载图片资源的 缓存 更新' href='http://www.yalewoo.com/http_get_image_etag_last_modified.html' />
<link rel='next' title='使用https访问不显示图片的问题已解决' href='http://www.yalewoo.com/zatan_https_img_not_display.html' />
<link rel='shortlink' href='http://www.yalewoo.com/?p=2841' />
<link rel="stylesheet" href="http://www.yalewoo.com/wp-content/plugins/wp-content-index/style.css" type="text/css" media="all" />

<!-- Start Of Script Generated By WP-PostViews -->
<script type="text/javascript">
/* <![CDATA[ */
jQuery.ajax({type:'GET',url:'http://www.yalewoo.com/wp-admin/admin-ajax.php',data:'postviews_id=2841&action=postviews',cache:false});/* ]]> */

					jQuery(document).ready(function() {
    var ajax_data = {
        action: "show_postview",
        postviews_id: 2841
    };
    $.post("http://www.yalewoo.com/wp-admin/admin-ajax.php", ajax_data,
    function(data) {
        $('.meta-view').html(data);
    });
    return false;
});					
					</script>
<!-- End Of Script Generated By WP-PostViews -->

		<script src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/jquery.lazyload.min.js" type="text/javascript"></script>
		<script type="text/javascript">
		    $(function() {
		        $("#secondary img").lazyload({
		            effect:"fadeIn"
		          });
		        });
		    $(function() {
		        $("img").lazyload({
		            effect:"fadeIn"
		          });
		        });
		</script>

<!--[if lte IE 8]><script>document.write("<p style=\"color:red;font-size:40px;\">你正在使用 Internet Explorer 的过期版本（IE6、IE7、IE8）<br/>请<a href=\"#\" style=\"color:blue;\">升级您的浏览器</a>获得更好的浏览体验。</p>");</script><![endif]-->
	
	</head><body>
<header id="topheader">
	<hgroup>
		<h1><a href = "http://www.yalewoo.com">雅乐网</a>
		</h1>
		<h2>计算机技术博客</h2>
	</hgroup>

	<div id="top_menu">
		<div class="menu-%e6%9c%80%e9%a1%b6%e7%ab%af-container"><ul id="menu-%e6%9c%80%e9%a1%b6%e7%ab%af" class="menu"><li id="menu-item-663" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-663"><a href="http://www.yalewoo.com/about">关于本站</a></li>
<li id="menu-item-662" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-662"><a href="http://www.yalewoo.com/updates">雅乐网更新记录</a></li>
<li id="menu-item-661" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-661"><a target="_blank" href="http://www.yalewoo.com/old0/">老版网站</a></li>
</ul></div>		<form method="get" id="searchform" action="http://www.yalewoo.com/">



<div>



	<input type="text" value="" name="s" id="s" size="15" />



	<input type="submit" id="searchsubmit" value="Search" />



</div>



</form>	</div>
	
	
</header>
<nav class="main_nav">
	<div class="menu-%e4%b8%bb%e8%8f%9c%e5%8d%9520171106-container"><ul id="menu-%e4%b8%bb%e8%8f%9c%e5%8d%9520171106" class="menu"><li id="menu-item-3235" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-3235"><a href="http://www.yalewoo.com/">首页</a></li>
<li id="menu-item-3237" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3237"><a href="http://www.yalewoo.com/programming">编程</a>
<ul class="sub-menu">
	<li id="menu-item-3238" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3238"><a href="http://www.yalewoo.com/programming/c_cpp">C/C++</a></li>
	<li id="menu-item-3243" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3243"><a href="http://www.yalewoo.com/programming/data_structure">数据结构</a></li>
	<li id="menu-item-3244" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3244"><a href="http://www.yalewoo.com/programming/basic_algorithm">算法</a></li>
	<li id="menu-item-3240" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3240"><a href="http://www.yalewoo.com/programming/online_judge">OJ刷题</a></li>
	<li id="menu-item-3239" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3239"><a href="http://www.yalewoo.com/programming/linux">Linux</a></li>
	<li id="menu-item-3241" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3241"><a href="http://www.yalewoo.com/programming/web">Web</a>
	<ul class="sub-menu">
		<li id="menu-item-3242" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3242"><a href="http://www.yalewoo.com/programming/web/wordpress">wordpress</a></li>
	</ul>
</li>
</ul>
</li>
<li id="menu-item-3245" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-3245"><a href="http://www.yalewoo.com/algorithm">算法</a>
<ul class="sub-menu">
	<li id="menu-item-3248" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3248"><a href="http://www.yalewoo.com/algorithm/maths">数学</a></li>
	<li id="menu-item-3246" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3246"><a href="http://www.yalewoo.com/algorithm/ml_notes">机器学习</a></li>
	<li id="menu-item-3281" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3281"><a href="http://www.yalewoo.com/algorithm/deep_learning">深度学习</a></li>
	<li id="menu-item-3247" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3247"><a href="http://www.yalewoo.com/algorithm/python">python</a></li>
	<li id="menu-item-3253" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3253"><a href="http://www.yalewoo.com/algorithm/%e7%a4%be%e5%9b%a2%e6%a3%80%e6%b5%8b">社团检测</a></li>
</ul>
</li>
<li id="menu-item-3254" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3254"><a href="http://www.yalewoo.com/tools">工具教程</a>
<ul class="sub-menu">
	<li id="menu-item-3255" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3255"><a href="http://www.yalewoo.com/tools/git">Git/GitHub</a></li>
	<li id="menu-item-3256" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3256"><a href="http://www.yalewoo.com/tools/sublime_text">Sublime Text</a></li>
	<li id="menu-item-3257" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3257"><a href="http://www.yalewoo.com/tools/vs2013">VS2013</a></li>
	<li id="menu-item-3259" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3259"><a href="http://www.yalewoo.com/tools/browser">浏览器</a></li>
	<li id="menu-item-3258" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3258"><a href="http://www.yalewoo.com/tools/other_tools">其他工具</a></li>
</ul>
</li>
<li id="menu-item-3260" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3260"><a href="http://www.yalewoo.com/excellent_softwares">软件推荐</a>
<ul class="sub-menu">
	<li id="menu-item-3261" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3261"><a href="http://www.yalewoo.com/excellent_softwares/zip">压缩加密</a></li>
	<li id="menu-item-3262" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3262"><a href="http://www.yalewoo.com/excellent_softwares/pictools">图片工具</a></li>
	<li id="menu-item-3263" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3263"><a href="http://www.yalewoo.com/excellent_softwares/media_tools">多媒体</a></li>
	<li id="menu-item-3264" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3264"><a href="http://www.yalewoo.com/excellent_softwares/safe_software">安全清理</a></li>
	<li id="menu-item-3265" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3265"><a href="http://www.yalewoo.com/excellent_softwares/android">安卓</a></li>
	<li id="menu-item-3266" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3266"><a href="http://www.yalewoo.com/excellent_softwares/utility">实用工具</a></li>
	<li id="menu-item-3267" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3267"><a href="http://www.yalewoo.com/excellent_softwares/search_tools">搜索词典</a></li>
	<li id="menu-item-3268" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3268"><a href="http://www.yalewoo.com/excellent_softwares/efficiency_tools">效率提升</a></li>
	<li id="menu-item-3269" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3269"><a href="http://www.yalewoo.com/excellent_softwares/programming_tools">编程开发</a></li>
	<li id="menu-item-3270" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3270"><a href="http://www.yalewoo.com/excellent_softwares/internet_software">网络软件</a></li>
	<li id="menu-item-3271" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3271"><a href="http://www.yalewoo.com/excellent_softwares/edit_and_reading">阅读编辑</a></li>
</ul>
</li>
<li id="menu-item-3272" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3272"><a href="http://www.yalewoo.com/it_resource">资源</a>
<ul class="sub-menu">
	<li id="menu-item-3273" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3273"><a href="http://www.yalewoo.com/it_resource/good_websites">好网站</a></li>
	<li id="menu-item-3274" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3274"><a href="http://www.yalewoo.com/it_resource/stuff">好资料</a></li>
	<li id="menu-item-3275" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3275"><a href="http://www.yalewoo.com/it_resource/how">授人以渔</a></li>
	<li id="menu-item-3276" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3276"><a href="http://www.yalewoo.com/it_resource/ebooks-share">电子书</a></li>
</ul>
</li>
<li id="menu-item-3277" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3277"><a href="http://www.yalewoo.com/learning">我爱学习</a>
<ul class="sub-menu">
	<li id="menu-item-3278" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3278"><a href="http://www.yalewoo.com/learning/popular_science">科普</a></li>
</ul>
</li>
<li id="menu-item-3280" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3280"><a href="http://www.yalewoo.com/about">关于本站</a></li>
</ul></div></nav>
<script type="text/javascript" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/dianzan.js"></script>


<div id="mbxdh">
		<div>
			
			<a href="http://www.yalewoo.com/algorithm">算法</a> &raquo; <a href="http://www.yalewoo.com/algorithm/%e7%a4%be%e5%9b%a2%e6%a3%80%e6%b5%8b">社团检测</a> &raquo; Modularity的计算方法——社团检测中模块度计算公式详解		</div>
</div>
<div id="container">

		<section class="whole_article" id="article-2841">
		<article class="post-2841 post type-post status-publish format-standard hentry category-266" id="entry">
			<h2 id="article-title">

								<span class = "title-meta-yuanchuang title-meta-ico"></span>
				
				<a href="http://www.yalewoo.com/modularity_community_detection.html" title="Modularity的计算方法——社团检测中模块度计算公式详解">Modularity的计算方法——社团检测中模块度计算公式详解</a>

								<span class = "title-meta-recommend title-meta-ico"></span>
				


								<span class = "title-meta-huo title-meta-ico"></span>
				

			</h2>
			

            <div class="post-meta">

                <span class="meta-author meta-ico"><a href="http://www.yalewoo.com/author/yalewoo" title="由yalewoo发布" rel="author">yalewoo</a> </span>
            	                <span class="meta-time meta-ico"> 最后修改于 2017-09-26</span>
             	发表于 2017-03-10
                
                
                
                
                <span class="meta-view meta-ico">3,162</span>
                <span class="meta-comment meta-ico"><a href="http://www.yalewoo.com/modularity_community_detection.html#comments">6</a></span>

                <br><br>

                <span class="meta-category meta-ico">      <a href="http://www.yalewoo.com/algorithm/%e7%a4%be%e5%9b%a2%e6%a3%80%e6%b5%8b" rel="category tag">社团检测</a> </span>
                <span class="meta-category meta-ico">       </span>

                

                
			</div>
			
			
            <div id="article-content">
				<div id="content-index" class="content-index" style="margin:0 0 10px 10px;float:right;"><span class="content-index-toctoggle">[<a id="content-index-togglelink" href="javascript:content_index_toggleToc()">目录开关</a>]</span>
<script type="text/javascript" language="javascript">
window.content_index_showTocToggle=true;function content_index_toggleToc(){var tts="显示目录";var tth="隐藏目录";if(window.content_index_showTocToggle){window.content_index_showTocToggle=false;document.getElementById("content-index-contents").style.display="block";document.getElementById("content-index-togglelink").innerHTML=tth}else{window.content_index_showTocToggle=true;document.getElementById("content-index-contents").style.display="none";document.getElementById("content-index-togglelink").innerHTML=tts}}
</script>
<ul id="content-index-contents"><li class="content-index-level-1"><a href="http://www.yalewoo.com/modularity_community_detection.html#社团检测" title="社团检测"><em>1</em><span>社团检测</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/modularity_community_detection.html#公式中用到的字母" title="公式中用到的字母"><em>2</em><span>公式中用到的字母</span></a><ul class="children"><li class="content-index-level-2"><a href="http://www.yalewoo.com/modularity_community_detection.html#和图相关的" title="和图相关的"><em>2.1</em><span>和图相关的</span></a></li></ul></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/modularity_community_detection.html#Modularity第一版" title="Modularity第一版"><em>3</em><span>Modularity第一版</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/modularity_community_detection.html#Modularity第二版" title="Modularity第二版"><em>4</em><span>Modularity第二版</span></a><ul class="children"><li class="content-index-level-2"><a href="http://www.yalewoo.com/modularity_community_detection.html#Newman论文中的定义" title="Newman论文中的定义"><em>4.1</em><span>Newman论文中的定义</span></a></li><li class="content-index-level-2"><a href="http://www.yalewoo.com/modularity_community_detection.html#期望边数\(\frac{k_ik_j}{2m}\)的来源" title="期望边数\(\frac{k_ik_j}{2m}\)的来源"><em>4.2</em><span>期望边数\(\frac{k_ik_j}{2m}\)的来源</span></a></li><li class="content-index-level-2"><a href="http://www.yalewoo.com/modularity_community_detection.html#configuration model" title="configuration model"><em>4.3</em><span>configuration model</span></a></li></ul></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/modularity_community_detection.html#版本二和版本一的关系" title="版本二和版本一的关系"><em>5</em><span>版本二和版本一的关系</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/modularity_community_detection.html#针对有权图和重叠社团的推广" title="针对有权图和重叠社团的推广"><em>6</em><span>针对有权图和重叠社团的推广</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/modularity_community_detection.html#C++代码计算" title="C++代码计算"><em>7</em><span>C++代码计算</span></a></li></ul></div>
<p><script src="https://cdnjs.cat.net/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></p>
<p>Modularity，中文称为模块度，是 Community Detection（社区发现/社团检测） 中用来衡量社区划分质量的一种方法。要理解Modularity，我们先来看社团和社团检测的概念。</p>
<h3 id="社团检测">社团检测</h3>
<p>社团检测，就是要在一个图（包含顶点和边）上发现社团结构，也就是要把图中的结点进行聚类，构成一个个的社团。关于社团（community），目前还没有确切的定义，一般认为社团内部的点之间的连接相对稠密，而不同社团的点之间的连接相对稀疏。</p>
<p>社团检测算法的输入是一张图：</p>
<p><a target="_blank" href="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170308214823.png" rel="attachment wp-att-2843"><img class="alignnone size-full wp-image-2843" data-original="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170308214823.png" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" alt="scrn20170308214823" width="584" height="428" /></a></p>
<noscript><img class="alignnone size-full wp-image-2843" src="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170308214823.png" alt="scrn20170308214823" width="584" height="428" /></a></p></noscript>
<p>上图可以用边表（edge list）文件表示：</p>
		<div id="crayon-5a04aadf63ed1204718170" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
0	1
0	2
0	3
1	2
1	3
2	4
4	5
4	7
5	6
5	7
5	8
6	8
7	8
7	10
8	9
9	10
9	12
9	13
10	11
10	12
11	12
11	13
12	13</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-1">1</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-2">2</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-3">3</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-4">4</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-5">5</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-6">6</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-7">7</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-8">8</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-9">9</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-10">10</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-11">11</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-12">12</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-13">13</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-14">14</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-15">15</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-16">16</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-17">17</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-18">18</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-19">19</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-20">20</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-21">21</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-22">22</div><div class="crayon-num" data-line="crayon-5a04aadf63ed1204718170-23">23</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-1"><span class="crayon-cn">0</span><span class="crayon-h">	</span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-2"><span class="crayon-cn">0</span><span class="crayon-h">	</span><span class="crayon-cn">2</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-3"><span class="crayon-cn">0</span><span class="crayon-h">	</span><span class="crayon-cn">3</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-4"><span class="crayon-cn">1</span><span class="crayon-h">	</span><span class="crayon-cn">2</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-5"><span class="crayon-cn">1</span><span class="crayon-h">	</span><span class="crayon-cn">3</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-6"><span class="crayon-cn">2</span><span class="crayon-h">	</span><span class="crayon-cn">4</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-7"><span class="crayon-cn">4</span><span class="crayon-h">	</span><span class="crayon-cn">5</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-8"><span class="crayon-cn">4</span><span class="crayon-h">	</span><span class="crayon-cn">7</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-9"><span class="crayon-cn">5</span><span class="crayon-h">	</span><span class="crayon-cn">6</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-10"><span class="crayon-cn">5</span><span class="crayon-h">	</span><span class="crayon-cn">7</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-11"><span class="crayon-cn">5</span><span class="crayon-h">	</span><span class="crayon-cn">8</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-12"><span class="crayon-cn">6</span><span class="crayon-h">	</span><span class="crayon-cn">8</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-13"><span class="crayon-cn">7</span><span class="crayon-h">	</span><span class="crayon-cn">8</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-14"><span class="crayon-cn">7</span><span class="crayon-h">	</span><span class="crayon-cn">10</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-15"><span class="crayon-cn">8</span><span class="crayon-h">	</span><span class="crayon-cn">9</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-16"><span class="crayon-cn">9</span><span class="crayon-h">	</span><span class="crayon-cn">10</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-17"><span class="crayon-cn">9</span><span class="crayon-h">	</span><span class="crayon-cn">12</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-18"><span class="crayon-cn">9</span><span class="crayon-h">	</span><span class="crayon-cn">13</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-19"><span class="crayon-cn">10</span><span class="crayon-h">	</span><span class="crayon-cn">11</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-20"><span class="crayon-cn">10</span><span class="crayon-h">	</span><span class="crayon-cn">12</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-21"><span class="crayon-cn">11</span><span class="crayon-h">	</span><span class="crayon-cn">12</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-22"><span class="crayon-cn">11</span><span class="crayon-h">	</span><span class="crayon-cn">13</span></div><div class="crayon-line" id="crayon-5a04aadf63ed1204718170-23"><span class="crayon-cn">12</span><span class="crayon-h">	</span><span class="crayon-cn">13</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>在计算机中，也可能以邻接矩阵的方式存储这张图：</p>
<p>邻接矩阵A，\(A_{ij} = 1\)表示 结点i 和 结点j 之间有一条边， \(A_{ij} = 0\)表示 结点i 和 结点j 之间没有边。特别的，这里结点自己和自己的连接是0，即\(A_{ii} = 0\)，不考虑结点自己和自己的连边。</p>
<p>输入图后，社团检测算法会输出一种社团划分，例如下面这个样子</p>
<p><a target="_blank" href="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170308214716.png" rel="attachment wp-att-2845"><img class="alignnone size-full wp-image-2845" data-original="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170308214716.png" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" alt="scrn20170308214716" width="582" height="419" /></a></p>
<noscript><img class="alignnone size-full wp-image-2845" src="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170308214716.png" alt="scrn20170308214716" width="582" height="419" /></a></p></noscript>
<p>具体的输出文件可能这样：</p>
		<div id="crayon-5a04aadf63ee1738204334" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
0 1 2 3
4 5 6 7 8
9 10 11 12 13</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5a04aadf63ee1738204334-1">1</div><div class="crayon-num" data-line="crayon-5a04aadf63ee1738204334-2">2</div><div class="crayon-num" data-line="crayon-5a04aadf63ee1738204334-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a04aadf63ee1738204334-1"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></div><div class="crayon-line" id="crayon-5a04aadf63ee1738204334-2"><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-h"> </span><span class="crayon-cn">7</span><span class="crayon-h"> </span><span class="crayon-cn">8</span></div><div class="crayon-line" id="crayon-5a04aadf63ee1738204334-3"><span class="crayon-cn">9</span><span class="crayon-h"> </span><span class="crayon-cn">10</span><span class="crayon-h"> </span><span class="crayon-cn">11</span><span class="crayon-h"> </span><span class="crayon-cn">12</span><span class="crayon-h"> </span><span class="crayon-cn">13</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>每行表示一个社团，里面的数字表示属于该社团的结点编号。</p>
<h3 id="公式中用到的字母">公式中用到的字母</h3>
<p>在不同的文献中，可能用不同的字母表示相同的东西，这样就给理解造成了一定困难。本文中的所有公式都使用下面的字母定义。</p>
<h4 id="和图相关的">和图相关的</h4>
<p>用 <strong>n</strong> 表示图的结点个数，这里n=14（结点编号0到13）</p>
<p>用 <strong>m</strong> 表示图中边的个数，这里m=23（上图中共23条边）</p>
<p>用 <strong>k</strong> 表示图中结点的度（degree），无向图中一个结点的度就是该结点连出去的边的条数。显然图中14个结点都有自己的度，我们用\(k_i\)来表示结点i的度。例如：\(k_0 = 3, k_5 = 4, k_6 = 2\)。</p>
<p>用 <strong>A</strong> 表示图的邻接矩阵。邻接矩阵A，\(A_{ij} = 1\)表示 结点v 和 结点w 之间有一条边， \(A_{ij} = 0\)表示 结点i 和 结点j 之间没有边。无向图的邻接矩阵是对称的，即\(A_{ij} = A_{ji}\)。特别的，这里结点自己和自己的连接是0，即\(A_{ii} = 0\)，不考虑结点自己和自己的连边。</p>
<h3 id="Modularity第一版">Modularity第一版</h3>
<p>Newman 在2003年的论文 “<a target="_blank" href="https://arxiv.org/abs/cond-mat/0308217" target="_blank" rel="noopener noreferrer">Finding and evaluating community structure in networks</a>” 中首次提出了modularity的定义，在论文中用来度量自己的社团检测算法的好坏。</p>
<blockquote><p>Consider a particular division of a network into k communities. Let us define a k×k symmetric matrix e whose element \(e_{ij}\) is the fraction of all edges in the network that link vertices in community i to vertices in community j [49].</p></blockquote>
<p>假设社团划分把一个网络划分为k个社团，定义一个k*k的矩阵e。\(e_{ij}\)表示连接 社团i 和 社团j 的边的数目 占 总边数 的比例。特别的，\(e_{ii}\)表示的是社团i和社团i之间的边占总边数的比例，也就是社团i内部的边占总边数的比例。</p>
<p>结合我们的例子</p>
<p><a target="_blank" href="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170308230905.png" rel="attachment wp-att-2847"><img class="alignnone size-full wp-image-2847" data-original="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170308230905.png" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" alt="scrn20170308230905" width="608" height="439" /></a></p>
<noscript><img class="alignnone size-full wp-image-2847" src="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170308230905.png" alt="scrn20170308230905" width="608" height="439" /></a></p></noscript>
<p>例子中，边数m=23 。社团1内部有5条边，于是有 \(e_{11} = \frac{5}{23}\)。</p>
<p>社团2和社团3之间有2条边，这样看来 \(e_{23} = \frac{2}{23}\) 。那么\(e_{32}\)等于多少？如果你没有看这句话后面的注释，也许你会以为\(e_{32} = e_{23} = \frac{2}{23}\) 。但其实不是的，我们看后面的注释：</p>
<blockquote><p>[49] As discussed in [33], it is crucial to make sure each edge is counted only once in the matrix eij—the same edge should not appear both above and below the diagonal. Alternatively, an edge linking communities i and j can be split, half-and-half, between the ij and ji elements, which has the advantage of making the matrix symmetric. Either way, there are a number of factors of 2 in the calculation that must be watched carefully, lest they escape one’s attention and make mischief.</p></blockquote>
<p>这里说，在矩阵e中，每条边要确保只计数了1次。一条边的计数不能同时出现在e矩阵的对角线上方和下方。如果\(e_{32} = e_{23} = \frac{2}{23}\)，那么连接社团2和社团3的两条边就分别计数了2次。因此，可以的情况是：</p>
<p>\(e_{32} = \frac{2}{23}， e_{23} = \frac{0}{23}\) 或者 \(e_{32} = \frac{0}{23}， e_{23} = \frac{2}{23}\) 或者\(e_{32} = \frac{1}{23} ， e_{23} = \frac{1}{23}\)</p>
<p>一种可行的方法是，把社团i和j之间的边分成2份，分别计入\(e_{ij}\) 和 \(e_{ji}\)，这样可以保证e是对称的。这样计算\(e_{ij}\)时，分母上就会多一个2 。</p>
<p>我们这个图中，社团1内部有5条边，社团2内部有7条边，社团3内部有8条边。社团1和社团2之间有1条边，社团1和社团3之间有0条边，社团2和社团3之间有2条边。可以得到e矩阵如下：</p>
<table>
<tbody>
<tr>
<td></td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>1</td>
<td>\(\frac{5}{23}\)</td>
<td>\(\frac{1}{2} \times \frac{1}{23}\)</td>
<td>\(\frac{1}{2} \times \frac{0}{23}\)</td>
</tr>
<tr>
<td>2</td>
<td>\(\frac{1}{2} \times \frac{1}{23}\)</td>
<td>\(\frac{7}{23}\)</td>
<td>\(\frac{1}{2} \times \frac{2}{23}\)</td>
</tr>
<tr>
<td>3</td>
<td>\(\frac{1}{2} \times \frac{0}{23}\)</td>
<td>\(\frac{1}{2} \times \frac{2}{23}\)</td>
<td>\(\frac{8}{23}\)</td>
</tr>
</tbody>
</table>
<p>这样，矩阵e的迹 \(tr(e) = \sum_{i}{e_{ii}}\)，也就是矩阵对角元素的和，就表示了社团内部的边的比例。这个值越大，代表社团内部联系越紧密。然而这样有一个缺陷，如果把整张图分成1个社团，这个值就是最大值1 。</p>
<blockquote><p>So we further define the row (or column) sums \(a_i = \sum_{j}{e_{ij}}\) , which represent the fraction of edges that connect to vertices in community i.</p></blockquote>
<p>因此定义了一个e的行和a， \(a_i = \sum_{j}{e_{ij}}\)，它表示连接到 社团i 中的边占总边数的比例。这句话是不准确的。</p>
<p>因为上面e矩阵中，我们对不同社团之间的边要除以2，因此这里连接到 社团i 中的边是有不同权重的，完全在社团i中的边权重为1，而只有一端在社团i中的边权重就是\(\frac{1}{2}\)。</p>
<p>由于权重的不同，如果把一条边看做有两个端点，准确的说法是</p>
<p>\(a_i = \sum_{j}{e_{ij}}\)，它表示连接到 社团i 中的边的端点数（相当于社团中所有点的度相加） 占总端点数（2m） 的比例 ，即</p>
<p>$$a_i = \frac{k_{C_i}}{2m}$$</p>
<p>\(k_{C_i}\)表示社团i内部所有点的度数之和。</p>
<p>例子里我们的a如下：</p>
<table>
<tbody>
<tr>
<td>a</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>\(\frac{5}{23} + \frac{1}{2} \times \frac{1}{23} + \frac{1}{2} \times \frac{0}{23}\) = \(\frac{11}{46}\)</td>
</tr>
<tr>
<td>2</td>
<td>\(\frac{1}{2} \times \frac{1}{23} + \frac{7}{23} + \frac{1}{2} \times \frac{2}{23}\) = \(\frac{17}{46}\)</td>
</tr>
<tr>
<td>3</td>
<td>\(\frac{1}{2} \times \frac{0}{23} + \frac{1}{2} \times \frac{2}{23} + \frac{8}{23}\) = \(\frac{18}{46}\)</td>
</tr>
</tbody>
</table>
<blockquote><p>In a network in which edges fall between vertices without regard for the communities they belong to, we would have \(e_{ij} = a_ia_j \).</p></blockquote>
<p><span style="color: #000000;"><strong>这句话我还没看懂，看懂的可以再评论区教下博主0.0</strong></span></p>
<blockquote><p>Thus we can define a modularity measure by</p>
<p>$$Q = \sum_i{(e_{ii} &#8211; a_i^2)} = Tr e &#8211; ||e^2||$$</p>
<p>where ||x|| indicates the sum of the elements of the matrix x.</p></blockquote>
<p>模块度的公式，定义是：</p>
<p>$$Q = \sum_i{(e_{ii} &#8211; a_i^2)} = \sum_i{e_{ii}} &#8211; \sum_i{ a_i^2}$$</p>
<p>如果用\(e_i\)表示社团i内部的边数，则\(e_ii = \frac{e_i}{m}\) 。然后把\(a_i = \frac{k_{C_i}}{2m}\)代入，就可以得到<strong>计算modularity最常用的公式</strong></p>
<p>$$Q = \sum_i{(\frac{e_i}{m} &#8211; (\frac{k_{C_i}}{2m})^2)} $$</p>
<p>我们用定义算一下我们这个例子中划分的模块度：</p>
<p>$$Q = \frac{5}{23} + \frac{7}{23} + \frac{8}{23} &#8211; (\frac{11}{46})^2 &#8211; (\frac{17}{46})^2 &#8211; (\frac{18}{46})^2 = \frac{553}{1058} = 0.52268431$$</p>
<p>还可以推导一下，得到矩阵公式：</p>
<p>$$Q = \sum_i{(e_{ii} &#8211; a_i^2)} = \sum_i{e_{ii}} &#8211; \sum_i{ a_i^2} = Tr e &#8211; ||e^2||$$</p>
<p>要证明这个，就是要\(\sum_i{ a_i^2} = ||e^2||\) 。 由于\(a_i = \sum_{j}{e_{ij}} \)，也就是</p>
<p>$$\sum_i{ ( \sum_{j}{e_{ij}} )^2} = ||e^2||$$</p>
<p>注意到e是对称的。也就是e矩阵的每行求和，然后平方，再相加 等于 e矩阵平方再求和。（<span style="color: #000000;"><strong>我还没看懂，看懂的可以再评论区教下博主0.0</strong></span>）</p>
<p>可以验证用矩阵公式算也会得到同样的Q。</p>
<p>这里顺便比较一下\(\sum_i{a_i^2 }\) 和 \( ||e^2||\)</p>
<p>$$\sum_i{ a_i^2} = (\frac{5}{23} + \frac{1}{46} + 0)^2 + (\frac{1}{46} + \frac{7}{23} + \frac{1}{23})^2 + (0 + \frac{1}{23} + \frac{8}{23})^2$$</p>
<p>$$e^2 = \begin{pmatrix}<br />
\frac{5}{23} &amp; \frac{1}{46} &amp; 0 \\<br />
\frac{1}{46} &amp; \frac{7}{23} &amp; \frac{1}{23} \\<br />
0 &amp; \frac{1}{23} &amp; \frac{8}{23} \\<br />
\end{pmatrix} \times<br />
\begin{pmatrix}<br />
\frac{5}{23} &amp; \frac{1}{46} &amp; 0 \\<br />
\frac{1}{46} &amp; \frac{7}{23} &amp; \frac{1}{23} \\<br />
0 &amp; \frac{1}{23} &amp; \frac{8}{23} \\<br />
\end{pmatrix} = $$</p>
<p>我感觉第一个式子拆开后，正好就是后一个式子里面矩阵中的元素两两相乘。最后累加结果也相同。</p>
<h3 id="Modularity第二版">Modularity第二版</h3>
<h4 id="Newman论文中的定义">Newman论文中的定义</h4>
<p>2006年，Newman 在论文“Modularity and community structure in networks”中重新定义了modularity，目的是为了满足spectral properties。原话为：</p>
<blockquote><p>Here we take a different approach based on a reformulation of the modularity in terms of the spectral properties of the network of interest.</p>
<p>Suppose our network contains n vertices.</p></blockquote>
<p>n 表示图的结点个数</p>
<blockquote><p>For a particular division of the network into two groups let s_i = 1 if vertex i belongs to group 1 and s_i = -1 if it belongs to group 2. Observing that the quantity \(\frac{1}{2} (s_i s_j + 1)\)  is 1 if i and j are in the same group and 0 otherwise</p></blockquote>
<p>论文中的例子是分为了2个社区。然后定义了\(s_i\)，\(s_i = 1\) 表示结点i属于社团1，\(s_i = -1\) 表示结点i属于社团2 。那么 \(\frac{1}{2} (s_i s_j + 1)\) 的值就可以表示结点i和j是否在同一个社团，在同一个社团时值是1，在不同社团时值是0.</p>
<blockquote><p>And let the number of edges between vertices i and j be \(A_{ij}\), which will normally be 0 or 1, although larger values are possible in networks where multiple edges are allowed.(The quantities \(A_{ij}\) are the elements of the so-called adjacency matrix.)</p></blockquote>
<p>让\(A_{ij}\) 表示 结点i 和 结点j 之间边的数目， 一般无权图中\(A_{ij}\) 的取值是0或者1。但可以扩展到两点之间多条边的情形。</p>
<p>这里有2点文中没到的：</p>
<p>1. 无向图的邻接矩阵是对称的，即\(A_{ij} = A_{ji}\)。因此，如果把矩阵A的所有元素相加，得到的值是图中边的数目的2倍：\(2m = \sum{A_{ij}}\)。</p>
<p>2. 自己和自己的连接在矩阵中是0，即\(A_{ii} = 0\)。</p>
<blockquote><p>At the same time, the expected number of edges between vertices i and j if edges are placed at random is \(\frac{k_ik_j}{2m}\), where \(k_i\) and \(k_j\) are the degrees of the vertices and \(m = \frac{1}{2} \sum_i{k_i}\) is the total number of edges in the network.</p></blockquote>
<p>同时，如果把同一个图中的边随机放置，则结点i和结点j之间边数的期望值是\(\frac{k_ik_j}{2m}\)（解释见下一节）。其中\(k_i\) 和 \(k_j\) 表示结点i和结点j的度， \(m = \frac{1}{2} \sum_i{k_i}\) 是图中边的个数。</p>
<blockquote><p>Thus the modularity Q is given by the sum of \(A_{ij} &#8211; \frac{k_ik_j}{2m}\)   over all pairs of vertices i, j that fall in the same group.</p></blockquote>
<p>\(A_{ij} &#8211; \frac{k_ik_j}{2m}\) 表示的是结点i和结点j之间的连边数，减去 随机情况下 结点i和结点j之间的期望连边数。（关于随机情况的讨论在下面）</p>
<blockquote><p>we can then express the modularity as</p>
<p>$$Q = \frac{1}{4m} \sum_{ij}{(A_{ij} &#8211; \frac{k_ik_j}{2m})(s_is_j+1)}$$</p>
<p>The leading factor of \(\frac{1}{4m}\) is merely conventional: it is included for compatibility with the previous definition of modularity (17).</p></blockquote>
<p>Q计算公式前面的\(\frac{1}{4m}\)仅仅是为了和之前第一版的modularity计算公式相兼容。</p>
<p>把这个公式变形一下：</p>
<p>$$Q = \frac{1}{2m} \sum_{ij}{(A_{ij} &#8211; \frac{k_ik_j}{2m})\frac{(s_is_j+1)}{2}}$$</p>
<p>这样就可以看出，后面的因子\(\frac{1}{2} (s_i s_j + 1)\)是为了确保求和时只对i和j属于同一个社团的情况进行求和。由于用s=1和-1只能表示有2个社团的情况，在多个社团时，我们可以引入记号\(\delta(i,j)\) ，\(\delta(i,j) = 0\) 表示结点i 和 j 不在同一个社团，\(\delta(i,j) = 1\) 表示结点 i 和 j 在同一个社团。这样计算公式就变成了</p>
<p>$$Q = \frac{1}{2m} \sum_{ij}{(A_{ij} &#8211; \frac{k_ik_j}{2m}) \delta(i, j)}$$</p>
<p><span style="line-height: 1.5;">其实就是下面的意思：</span></p>
<p><span style="line-height: 1.5;">$$Q = \frac{1}{2m} \sum_{i,j在同一社团}{(A_{ij} &#8211; \frac{k_ik_j}{2m}) }$$</span></p>
<p>再来看一下这个式子中各个项的意义：</p>
<p>\(A_{ij}\) 表示 结点i 和 结点j 之间边的数目</p>
<p>\(\frac{k_ik_j}{2m}\) 表示 随机放置边的情况下，结点i和结点j 之间边数的期望值</p>
<p>带上前面的求和号，</p>
<p>\(\sum_{i,j}{A_{ij}}\) 就表示 社团内部实际的 边 的数目 的2倍（2倍是因为ij和ji会计算2次）</p>
<p>\(\sum_{i,j}{\frac{k_ik_j}{2m}}\) 就表示 随机放置边的情况下，社团内部边数的期望值 的2倍（2倍是因为ij和ji会计算2次）</p>
<p>最后除以2m，之所以是2m，就是因为前面的边数都是2倍，这样一除就可以得到边的比例。（其实有没有\(\frac{1}{2m}\)是无所谓的，乘以常数并不影响求最值的问题）</p>
<p>\(\frac{1}{2m} \sum_{i,j}{A_{ij}}\) 就表示 社团内部实际的边数的比例</p>
<p>\(\frac{1}{2m} \sum_{i,j}{\frac{k_ik_j}{2m}}\)就表示 随机情况下社团内部期望的边数的比例</p>
<p>因此，Modularity的定义可以看做：</p>
<p>在社区内部的边的比例，减去边随机放置时社区内部期望边数的比例。</p>
<h4 id="期望边数\(\frac{k_ik_j}{2m}\)的来源">期望边数\(\frac{k_ik_j}{2m}\)的来源</h4>
<p>参考论文<a target="_blank" href="https://arxiv.org/abs/physics/0605087" target="_blank" rel="noopener noreferrer">Finding community structure in networks using the eigenvectors of matrices</a></p>
<p>每个结点的度不变，边重新连接，这就需要一个已知每个结点的度，来随机生成图的模型。图生成模型最重要的特征就是两个点i和j之间连边的概率（或者叫边的数目的期望值），记为\(P_{ij}\)，那么\(P_{ij}\)会满足什么性质呢？</p>
<p>1.每个结点度不变，最终总边数也不会变。因此随机连边后，图中的边数期望值等于原来真实图中的边数</p>
<p>$$\sum_{i,j}{P_{ij}} = \sum_{i,j}{A_{ij}} = 2m$$</p>
<p>2.对每个节点来说，它的度也不会变，就有</p>
<p>$$\sum_{j}{P_{ij}} = k_i$$</p>
<p>在满足这两个式子的情况下，随机的进行连边。这样在选定了一个点（边的一个端点）后，选另一个点（边的另一个端点）时，会选到结点i的概率，就只与结点i的度\(k_i\)有关。而一条边的两个端点进行选择的时候都是独立随机的。因此\(P_{ij}\)，选到i的概率与\(k_i\)有关，选到j的概率与\(k_j\)有关，就可以写成</p>
<p>$$P_{ij} = f(k_i)f(k_j)$$</p>
<p>由于\(P_{ij} = P_{ji}\)，因此上面两个函数f是相同的。</p>
<p>$$\sum_{j}{P_{ij}} = \sum_{j}{f(k_i)f(k_j)} = f(k_i) \sum_{j}{f(k_j)} $$</p>
<p>根据上面性质中的第二个式子\(\sum_{j}{P_{ij}} = k_i\)，就有</p>
<p>$$f(k_i) \sum_{j}{f(k_j)} = k_i$$</p>
<p>由于\(\sum_{j}{f(k_j)}\)并不包含i，可以看出\(f(k_i)\)和\(k_i\)之间是倍数关系，不妨设</p>
<p>$$f(k_i) = C k_i$$</p>
<p>C是常量。代入上面性质的第一个式子\(\sum_{i,j}{P_{ij}} = \sum_{i,j}{A_{ij}} = 2m\) ，有</p>
<p>$$\sum_{i,j}{P_{ij}} = 2m$$</p>
<p>$$\sum_{i,j}{f(k_i)f(k_j)} = 2m$$</p>
<p>$$\sum_{i,j}{C k_i C k_j} = 2m$$</p>
<p>$$C^2 \sum_{ij}{k_ik_j} = 2m$$</p>
<p>\(\sum_{ij}{k_ik_j}\)是可以用m表示的。假设结点编号从1到n，则</p>
<p>$$2m = k_1 + k_2 + &#8230; + k_n$$</p>
<p>$$(2m)^2 = (k_1 + k_2 + &#8230; + k_n)^2$$</p>
<p>平方展开，正好等于n个k值两两相乘，这正好等于\(\sum_{ij}{k_ik_j}\)。即</p>
<p>$$(2m)^2 = (k_1 + k_2 + &#8230; + k_n)^2 = \sum_{ij}{k_ik_j}$$</p>
<p>再回到上面的式子，\(C^2 \sum_{ij}{k_ik_j} = 2m\)就变成了</p>
<p>$$C^2 (2m)^2 = 2m$$</p>
<p>$$C = \frac{1}{\sqrt{2m}}$$</p>
<p>因此求得\(P_{ij}\)</p>
<p>$$P_{ij} = f(k_i)f(k_j) = C^2 k_i k_j = \frac{k_ik_j}{2m}$$</p>
<p>这个结果，当m非常大的时候，就等于configuration model中的概率</p>
<h4 id="configuration model">configuration model</h4>
<p>configuration model是一种生成图的模型，它已知每个结点的度\(k_i\)，然后随机生成边。</p>
<p>结点i的度\(k_i\)可以看做结点i有\(k_i\)个端点（stub）可以连接</p>
<p>所有结点的端点的个数为 \(l_n = \sum_{i}{k_i} = 2m\)</p>
<p>我们的图来说就是这样：</p>
<p><a target="_blank" href="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170309165401.png" rel="attachment wp-att-2870"><img class="alignnone size-full wp-image-2870" data-original="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170309165401.png" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" alt="scrn20170309165401" width="585" height="420" /></a></p>
<noscript><img class="alignnone size-full wp-image-2870" src="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170309165401.png" alt="scrn20170309165401" width="585" height="420" /></a></p></noscript>
<p>因为我们的原图有23条边，因此有46个端点。然后端点之间随机相连，每个端点连1次。例如连接5次后可能这样</p>
<p><a target="_blank" href="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170309165607.png" rel="attachment wp-att-2871"><img class="alignnone size-full wp-image-2871" data-original="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170309165607.png" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" alt="scrn20170309165607" width="582" height="446" /></a></p>
<noscript><img class="alignnone size-full wp-image-2871" src="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/03/scrn20170309165607.png" alt="scrn20170309165607" width="582" height="446" /></a></p></noscript>
<p>现在的问题是，这样把边随机放置后，结点v和结点w之间边数的期望值是多少。</p>
<p>可以这样考虑，在一次随机选择两个末梢连边时，选定结点i的末梢后，选择另一个端点时共有2m-1中选择，而i和j连接的选择共有\(k_j\)种，概率就是\(\frac{k_j}{2m-1}\)。而结点i共有\(k_i\)个端点，也就是这样的选择机会有\(k_i\)次。因此i和j相连的概率为</p>
<p>$$P_{ij} = \frac{k_ik_j}{2m-1}$$</p>
<p>当m很大的时候，2m-1中的-1可以去掉，这样就和modularity中的概率一致了。</p>
<h3 id="版本二和版本一的关系">版本二和版本一的关系</h3>
<p>版本二从不同的角度定义了modularity，但是两个版本其实是相等的。也就是说</p>
<p>版本一：（c是社团个数）</p>
<p>$$Q = \sum_i^c{(e_{ii} &#8211; a_i^2)} = \sum_i{e_{ii}} &#8211; \sum_i{ a_i^2}$$</p>
<p>版本二：</p>
<p>$$Q = \frac{1}{2m} \sum_{i,j在同一社团}{(A_{ij} &#8211; \frac{k_ik_j}{2m}) } $$</p>
<p>这两个相等，也就是</p>
<p>$$\sum_i{e_{ii}} &#8211; \sum_i{ a_i^2} = \frac{1}{2m} \sum_{i,j在同一社团}{(A_{ij} &#8211; \frac{k_ik_j}{2m}) }$$</p>
<p>先看第一项</p>
<p>$$ \sum_i^c{e_{ii}} = \frac{1}{2m} \sum_{i,j在同一社团}{(A_{ij} )}$$</p>
<p>\(e_{ii}\)表示的是社团i内部边的比例，求和后就是所有社团内部的边的比例。右边的求和\(\sum{(A_{ij} }\)就等于内部边数的2倍，除以2m也就是社团内部边的比例。这两个相等是容易看出的。</p>
<p>再看第二项</p>
<p>$$\sum_i^c{ a_i^2} = \frac{1}{2m} \sum_{i,j在同一社团}{(\frac{k_ik_j}{2m}) }$$</p>
<p>在版本一中，\(a_{i}\)表示连接到 社团i 中的边占总边数的比例。这里连接到 社团i 中的边是有不同权重的，完全在社团i中的边权重为1，而只有一端在社团i中的边权重就是1/2。</p>
<p>乘以2的话，\(2 * a_i\)就正好是社团i内结点的度数之和 占总边数的比例（完全在社团i中的边权重为2，而只有一端在社团i中的边权重就是1，正好是度数之和）</p>
<p>在乘以m，就可以去掉比例，\(2m * a_i\)是社团i内结点的度数之和。也就是，\(a_i\) = 社团i内结点的度数之和 / 2m</p>
<p>\(a_i^2\)就是社团i内结点的度数之和的平方 / \((2m)^2\)</p>
<p>$$右边= \frac{1}{2m} \sum_{i,j在同一社团}{(\frac{k_ik_j}{2m}) } = \frac{1}{(2m)^2} \sum_{i,j在同一社团}{(k_ik_j) }$$</p>
<p>度数之和的平方，展开正好就是右边的 社团内部的度数两两相乘再相加\(\sum_{i,j在同一社团}{(k_ik_j) }\)</p>
<p>因此这两个是相等的</p>
<p>$$Q = \sum_i{e_{ii}} &#8211; \sum_i{ a_i^2} = \frac{1}{2m} \sum_{i,j在同一社团}{(A_{ij} &#8211; \frac{k_ik_j}{2m}) }$$</p>
<h3 id="针对有权图和重叠社团的推广">针对有权图和重叠社团的推广</h3>
<p>参考论文：<a target="_blank" href="http://dl.acm.org/citation.cfm?id=1924690">Identification of overlapping community structure in complex networks using fuzzy c-means clustering</a></p>
<p>上面的Modularity公式，可以写成下面的形式：</p>
<p>$$Q = \sum_k{(\frac{e_{kk}}{m} &#8211; (\frac{d_k}{2m})^2)} $$</p>
<p>其中， \(e_kk\)表示社团k内部的边数，\(d_k\) 表示社团i内部所有点的度数之和，m表示图中边的个数。</p>
<p>在有权图中，相当于把原来有一条边算作1，现在算作权值w的。</p>
<p>而针对重叠社团的情况，根据所属社团的个数，给边的贡献加一个权值：</p>
<p>若 结点i 属于 n 个社团（其中包括社团k），则定义 \(w_{ik} = \frac{1}{n}\) 。而在无重叠的情况下，\(w_{ik} = 1\)，且k仅有一个</p>
<p>$$e_{kk} = \frac{1}{2} \sum_{i,j \in C_k} \frac{w_{ik} + w_{jk}}{2} A_{ij}$$</p>
<p>系数 1/2 是因为社团内的一条边 ij和ji 会计算两次</p>
<p>\(A\)是图的邻接矩阵，\(A_{ij}\)也就是对应边的权值。</p>
<p>为了求得社团内部边的度数，先计算社团连出去的边数：</p>
<p>$$e_{k_out} = \sum_{i \in C_k, j \notin C_k} (w_{ik} + (1 &#8211; w_{jk})) A_{ij}$$</p>
<p>$$d_k = 2e_{kk} + e_{k_out}$$</p>
<h3 id="C++代码计算">C++代码计算</h3>
<p><a target="_blank" href="http://www.yalewoo.com/calc_modularity_cpp.html">Modularity计算的C++代码 | 雅乐网</a></p>
			</div>
		</article>

		<div class="social-main">
			<div class="post-like">
			    <a href="javascript:;" data-action="ding" data-id="2841" class="specsZan ">点赞 <span class="count">
			        18</span>
			    </a>
			</div>

			<div class="reward-button"><a href="http://www.yalewoo.com/denote" target="_blank">赏</a> 
				<span class="reward-code">
					<span class="alipay-code"> <img class="alipay-img wdp-appear" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/alipay.png"><b>支付宝打赏</b> </span> <span class="wechat-code"> <img class="wechat-img wdp-appear" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/wechatpay.png"><b>微信打赏</b> </span>
				</span>
			</div>

			<div class="post-like">
			    <a id="fenxianganniu" onClick="show_bdsharebox();">分享
			    </a>
			</div>

			<div class="bdsharebuttonbox" id="bdsharebuttonbox">
				
			</div>
			

			

		</div>
		
		<div class="reward-notice">
			<p class="">如果文章对你有帮助，欢迎点赞或打赏（金额不限）。你的打赏将全部用于支付网站服务器费用和提高网站文章质量，谢谢支持。</p>
		</div>
		
			
		

		



		

		

		<div class="article-copyright">
                			<b> 版权声明: </b>
    			<p> 本文由 <a href="http://www.yalewoo.com/author/yalewoo" title="由yalewoo发布" rel="author">yalewoo</a> 原创，商业转载请联系作者获得授权。 <br>非商业转载请注明作者 <a href="http://www.yalewoo.com/author/yalewoo" title="由yalewoo发布" rel="author">yalewoo</a> 或 <a href="http://www.yalewoo.com/" title="雅乐网" ?>雅乐网</a> ，并附带本文链接：<br><a href="http://www.yalewoo.com/modularity_community_detection.html" title=Modularity的计算方法——社团检测中模块度计算公式详解>http://www.yalewoo.com/modularity_community_detection.html</a></p>
						</div>

		<div class="post-navigation">
			<div class="post-previous">
				<p>上一篇：</p>
				<a href="http://www.yalewoo.com/http_get_image_etag_last_modified.html" rel="prev">网络下载图片资源的 缓存 更新</a>			</div>
			<div class="post-next">
				<p>下一篇：</p>
				<a href="http://www.yalewoo.com/zatan_https_img_not_display.html" rel="next">使用https访问不显示图片的问题已解决</a>			</div>
		</div>


		<div class="related_posts">
			<p>与  相关的文章</p>
			<ul>
										<li><a rel="bookmark" href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html"  title="重叠社区发现评估指标：标准化互信息NMI计算步骤和C++代码（Normalized Mutual Information）" target="_blank">重叠社区发现评估指标：标准化互信息NMI计算步骤和C++代码（Normalized Mutual Information）</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/calc_modularity_cpp.html"  title="Modularity计算的C++代码" target="_blank">Modularity计算的C++代码</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/community_detection_algorithm_call.html"  title="社团检测常用算法调用总结" target="_blank">社团检测常用算法调用总结</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/social_network_analysis_note_1_introduction.html"  title="Social Network Analysis笔记1：介绍" target="_blank">Social Network Analysis笔记1：介绍</a></li>
								</ul>
		</div>



		<div class="comments-template">
    		


<div id="comments" class="comments-area">

			<h3 class="comments-title">
		文章《Modularity的计算方法——社团检测中模块度计算公式详解》共有6条评论：
		</h3>

		
		<ol class="comment-list">
				<li class="comment even thread-even depth-1" id="li-comment-606">
		<div id="comment-606" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://0.gravatar.com/avatar/91110beedf8dcfebed94861b66d42c6c?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://0.gravatar.com/avatar/91110beedf8dcfebed94861b66d42c6c?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />
<noscript><img alt='' src='http://0.gravatar.com/avatar/91110beedf8dcfebed94861b66d42c6c?s=64&#038;d=identicon&#038;r=g' srcset='http://0.gravatar.com/avatar/91110beedf8dcfebed94861b66d42c6c?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				zy   				</div>
  				
  				<p>赞</p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/modularity_community_detection.html#comment-606"><time datetime="2017-06-06T16:32:03+00:00">2017年6月6日 16:32</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/modularity_community_detection.html?replytocom=606#respond' onclick='return addComment.moveForm( "comment-606", "606", "respond", "2841" )' aria-label='回复给zy'>回复</a>				</span>
				</div>
			</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-647">
		<div id="comment-647" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://2.gravatar.com/avatar/?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://0.gravatar.com/avatar/?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo avatar-default' height='64' width='64' />
<noscript><img alt='' src='http://2.gravatar.com/avatar/?s=64&#038;d=identicon&#038;r=g' srcset='http://0.gravatar.com/avatar/?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo avatar-default' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				HCaffrey   				</div>
  				
  				<p>In a network in which edges fall between vertices without regard for the communities they belong to, we would have eij=aiaj</p>
<p>把这个式子代入ai = sum_j(eiej)，式子等价于sum_j(aj) = 1<br />
Meaning it is a random network regarding all of its nodes as individual community</p>
<p>sum_j 表示连加符号，抱歉没能插入公式</p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/modularity_community_detection.html#comment-647"><time datetime="2017-07-29T23:52:57+00:00">2017年7月29日 23:52</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/modularity_community_detection.html?replytocom=647#respond' onclick='return addComment.moveForm( "comment-647", "647", "respond", "2841" )' aria-label='回复给HCaffrey'>回复</a>				</span>
				</div>
			</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-675">
		<div id="comment-675" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://2.gravatar.com/avatar/865a2eae64daf59b1e4c6726ce35d165?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://2.gravatar.com/avatar/865a2eae64daf59b1e4c6726ce35d165?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />
<noscript><img alt='' src='http://2.gravatar.com/avatar/865a2eae64daf59b1e4c6726ce35d165?s=64&#038;d=identicon&#038;r=g' srcset='http://2.gravatar.com/avatar/865a2eae64daf59b1e4c6726ce35d165?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				six-archer   				</div>
  				
  				<p>如果按照这个算法去算Q的值的话，把每一个点都当成一个群的话算出来不是负的值吗？但是Q的范围不是应该在0-1之间的吗？求大佬解释一下</p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/modularity_community_detection.html#comment-675"><time datetime="2017-08-21T16:05:36+00:00">2017年8月21日 16:05</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/modularity_community_detection.html?replytocom=675#respond' onclick='return addComment.moveForm( "comment-675", "675", "respond", "2841" )' aria-label='回复给six-archer'>回复</a>				</span>
				</div>
			</div>
		</div>
	<ul class="children">
	<li class="comment byuser comment-author-yalewoo bypostauthor odd alt depth-2" id="li-comment-676">
		<div id="comment-676" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://0.gravatar.com/avatar/62e19307736b9ce9073ce4c5f76e5407?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://0.gravatar.com/avatar/62e19307736b9ce9073ce4c5f76e5407?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />
<noscript><img alt='' src='http://0.gravatar.com/avatar/62e19307736b9ce9073ce4c5f76e5407?s=64&#038;d=identicon&#038;r=g' srcset='http://0.gravatar.com/avatar/62e19307736b9ce9073ce4c5f76e5407?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				yalewoo <span class="comment-author-is-bloger"> 作者</span>  				</div>
  				
  				<p>维基百科上说 Q的范围是 [−1/2,1) ，具体怎么得出的我也不懂 <img src="http://tb2.bdstatic.com/tb/editor/images/face/i_f19.png" alt="[委屈]" class="wp-smiley" style="height: 1em; max-height: 1em;" /> <a href="https://en.wikipedia.org/wiki/Modularity_(networks)" rel="nofollow">https://en.wikipedia.org/wiki/Modularity_(networks)</a></p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/modularity_community_detection.html#comment-676"><time datetime="2017-08-21T19:23:15+00:00">2017年8月21日 19:23</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/modularity_community_detection.html?replytocom=676#respond' onclick='return addComment.moveForm( "comment-676", "676", "respond", "2841" )' aria-label='回复给yalewoo'>回复</a>				</span>
				</div>
			</div>
		</div>
	<ul class="children">
	<li class="comment even depth-3" id="li-comment-677">
		<div id="comment-677" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://0.gravatar.com/avatar/?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://2.gravatar.com/avatar/?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo avatar-default' height='64' width='64' />
<noscript><img alt='' src='http://0.gravatar.com/avatar/?s=64&#038;d=identicon&#038;r=g' srcset='http://2.gravatar.com/avatar/?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo avatar-default' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				匿名   				</div>
  				
  				<p>另外请问一下，这种以Q为判断依据在有向图中是不是不能使用的</p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/modularity_community_detection.html#comment-677"><time datetime="2017-08-21T19:47:10+00:00">2017年8月21日 19:47</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/modularity_community_detection.html?replytocom=677#respond' onclick='return addComment.moveForm( "comment-677", "677", "respond", "2841" )' aria-label='回复给'>回复</a>				</span>
				</div>
			</div>
		</div>
	<ul class="children">
	<li class="comment byuser comment-author-yalewoo bypostauthor odd alt depth-4" id="li-comment-679">
		<div id="comment-679" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://0.gravatar.com/avatar/62e19307736b9ce9073ce4c5f76e5407?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://0.gravatar.com/avatar/62e19307736b9ce9073ce4c5f76e5407?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />
<noscript><img alt='' src='http://0.gravatar.com/avatar/62e19307736b9ce9073ce4c5f76e5407?s=64&#038;d=identicon&#038;r=g' srcset='http://0.gravatar.com/avatar/62e19307736b9ce9073ce4c5f76e5407?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				yalewoo <span class="comment-author-is-bloger"> 作者</span>  				</div>
  				
  				<p>原始的modularity应该是不可以的，不过也有很多人把它推广到有向图也可以用了 可以google下 <a href="https://www.google.com/search?source=hp&#038;q=modularity+directed+graph&#038;oq=modula&#038;gs_l=psy-ab.3.0.35i39k1j0i67k1j0i131k1j0i20k1.1230.2823.0.4666.7.6.0.0.0.0.237.561.0j2j1.3.0" rel="nofollow">https://www.google.com/search?source=hp&#038;q=modularity+directed+graph&#038;oq=modula&#038;gs_l=psy-ab.3.0.35i39k1j0i67k1j0i131k1j0i20k1.1230.2823.0.4666.7.6.0.0.0.0.237.561.0j2j1.3.0</a>&#8230;.0&#8230;1.4.64.psy-ab..5.2.381.0.iwUll35qoEw</p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/modularity_community_detection.html#comment-679"><time datetime="2017-08-22T10:35:20+00:00">2017年8月22日 10:35</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/modularity_community_detection.html?replytocom=679#respond' onclick='return addComment.moveForm( "comment-679", "679", "respond", "2841" )' aria-label='回复给yalewoo'>回复</a>				</span>
				</div>
			</div>
		</div>
	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">我要评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/modularity_community_detection.html#respond" style="display:none;">取消回复</a></small></h3>			<form action="http://www.yalewoo.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-form-comment"><textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p>

<script type="text/javascript" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/show_smilies.js"></script>

<div class="ylw_comment_toolbar">
<a class="button-insert-smilies" id="button-insert-smilies" title="插入表情" onClick="show_smilies();"></a>
</div>

<div class="ylw_smilies_box_wrapper">
<div class="ylw_smilies_box" id="ylw_smilies_box">




</div>

</div><div class="comment-name-email-url"><p class="comment-form-author"><label for="author">姓名</label><input id="author" name="author" type="text" value="" size="30" />  </p>
<p class="comment-form-email"><label for="email">邮箱</label><input id="email" name="email" type="text" value="" size="30" /> </p>
<p class="comment-form-url"><label for="url">网址</label><input id="url" name="url" type="text" value="" size="30"  /></p></div><div class='comment_yzm'>验证码*： 1 + 0 = <input type='text' name='sum' class='math_textfield'  required='required' value='' size='25' tabindex='4'><input type='hidden' name='num1' value='1'><input type='hidden' name='num2' value='0'></div><div class="comment-right"><div class="comment-submit-button">
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论" /> <input type='hidden' name='comment_post_ID' value='2841' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p></div><div class="ylw_comment_notifyme"><input type="checkbox" name="comment_mail_notify" id="comment_mail_notify" value="comment_mail_notify" checked="checked" style="margin-left:20px;" /><label for="comment_mail_notify">有人回复时邮件通知我</label></div></div></div><div class="clear"></div>			</form>
			</div><!-- #respond -->
	
</div><!-- .comments-area -->

		</div>  


        
		
			
	</section>
	


	</div>
<footer id="footer">
      Copyright &copy;   <a title="雅乐网" href="http://www.yalewoo.com">雅乐网</a>  /<a title="自豪地采用WordPress" href="https://cn.wordpress.org" target="_blank">WordPress</a> / <a title="YLW3.0主题" href="http://www.yalewoo.com/ylw3.html" target="_blank">YLW3.0</a>  /  <a title="老薛主机" href="https://my.laoxuehost.net/aff.php?aff=2518" target="_blank">老薛主机</a>  /  <a title="七牛云存储" href="https://portal.qiniu.com/signup?code=3li1yeb2ph1ea" target="_black">七牛云存储</a>

      <div id="footer_menu">
      	<div class="menu-%e5%ba%95%e9%83%a8-container"><ul id="menu-%e5%ba%95%e9%83%a8" class="menu"><li id="menu-item-655" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-655"><a target="_blank" href="http://www.yalewoo.com/sitemap.xml">站点地图</a></li>
</ul></div>      </div>
      <div id="cnzztongji">
      	

		<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1252889774'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s5.cnzz.com/stat.php%3Fid%3D1252889774%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>

    

		<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e937132d7f7e86dfb5300ce1ab2c25f7";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



		</div>
</footer>

<script type="text/javascript" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/backtop.js"></script>

<script type='text/javascript' src='http://www.yalewoo.com/wp-includes/js/comment-reply.min.js?ver=4.7.7'></script>



</body>
</html>
<!-- Dynamic page generated in 2.172 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2017-11-10 03:22:07 -->

<!-- Compression = gzip -->
<!-- super cache -->