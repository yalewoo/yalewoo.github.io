<!DOCTYPE html>
<html>
	<head>
		<title>
			重叠社区发现评估指标：标准化互信息NMI计算步骤和C++代码（Normalized Mutual Information）  |  雅乐网		</title>
		
		<meta charset="UTF-8" />
		<meta name="renderer" content="webkit">
		<link rel="stylesheet" href="http://www.yalewoo.com/wp-content/themes/YLW3_lite/style.css" type="text/css" />
		<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.yalewoo.com/feed" />


				
		
<!-- All in One SEO Pack 2.3.12.1 by Michael Torbert of Semper Fi Web Design[-1,-1] -->
<meta name="description"  content="NMI的英文全称是Normalized Mutual Information，中文叫做标准化互信息，它可以用来衡量两种聚类结果的相似度。 本文介绍适用于重叠聚类的NMI计算步骤，重叠指的是，一个节点可以属于多个类别。 假设一个图中的真实社团如下所示： 注意上面3和4同时属于社团1和社团2，这就是重叠的" />

<link rel="canonical" href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html" />
<!-- /all in one seo pack -->
<link rel="alternate" type="application/rss+xml" title="雅乐网 &raquo; 重叠社区发现评估指标：标准化互信息NMI计算步骤和C++代码（Normalized Mutual Information）评论Feed" href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html/feed" />
<link rel='stylesheet' id='crayon-css'  href='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-consolas-css'  href='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/fonts/consolas.css?ver=_2.7.2_beta' type='text/css' media='all' />
<script type='text/javascript' src='https://lib.sinaapp.com/js/jquery/1.8.2/jquery.min.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/www.yalewoo.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta'></script>
<link rel='prev' title='Modularity计算的C++代码' href='http://www.yalewoo.com/calc_modularity_cpp.html' />
<link rel='next' title='Spyder打不开 点击没反应' href='http://www.yalewoo.com/spyder_cannot_open.html' />
<link rel='shortlink' href='http://www.yalewoo.com/?p=3108' />
<link rel="stylesheet" href="http://www.yalewoo.com/wp-content/plugins/wp-content-index/style.css" type="text/css" media="all" />

<!-- Start Of Script Generated By WP-PostViews -->
<script type="text/javascript">
/* <![CDATA[ */
jQuery.ajax({type:'GET',url:'http://www.yalewoo.com/wp-admin/admin-ajax.php',data:'postviews_id=3108&action=postviews',cache:false});/* ]]> */

					jQuery(document).ready(function() {
    var ajax_data = {
        action: "show_postview",
        postviews_id: 3108
    };
    $.post("http://www.yalewoo.com/wp-admin/admin-ajax.php", ajax_data,
    function(data) {
        $('.meta-view').html(data);
    });
    return false;
});					
					</script>
<!-- End Of Script Generated By WP-PostViews -->

		<script src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/jquery.lazyload.min.js" type="text/javascript"></script>
		<script type="text/javascript">
		    $(function() {
		        $("#secondary img").lazyload({
		            effect:"fadeIn"
		          });
		        });
		    $(function() {
		        $("img").lazyload({
		            effect:"fadeIn"
		          });
		        });
		</script>

<!--[if lte IE 8]><script>document.write("<p style=\"color:red;font-size:40px;\">你正在使用 Internet Explorer 的过期版本（IE6、IE7、IE8）<br/>请<a href=\"#\" style=\"color:blue;\">升级您的浏览器</a>获得更好的浏览体验。</p>");</script><![endif]-->
	
	</head><body>
<header id="topheader">
	<hgroup>
		<h1><a href = "http://www.yalewoo.com">雅乐网</a>
		</h1>
		<h2>计算机技术博客</h2>
	</hgroup>

	<div id="top_menu">
		<div class="menu-%e6%9c%80%e9%a1%b6%e7%ab%af-container"><ul id="menu-%e6%9c%80%e9%a1%b6%e7%ab%af" class="menu"><li id="menu-item-663" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-663"><a href="http://www.yalewoo.com/about">关于本站</a></li>
<li id="menu-item-662" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-662"><a href="http://www.yalewoo.com/updates">雅乐网更新记录</a></li>
<li id="menu-item-661" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-661"><a target="_blank" href="http://www.yalewoo.com/old0/">老版网站</a></li>
</ul></div>		<form method="get" id="searchform" action="http://www.yalewoo.com/">



<div>



	<input type="text" value="" name="s" id="s" size="15" />



	<input type="submit" id="searchsubmit" value="Search" />



</div>



</form>	</div>
	
	
</header>
<nav class="main_nav">
	<div class="menu-%e4%b8%bb%e8%8f%9c%e5%8d%9520171106-container"><ul id="menu-%e4%b8%bb%e8%8f%9c%e5%8d%9520171106" class="menu"><li id="menu-item-3235" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-3235"><a href="http://www.yalewoo.com/">首页</a></li>
<li id="menu-item-3237" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3237"><a href="http://www.yalewoo.com/programming">编程</a>
<ul class="sub-menu">
	<li id="menu-item-3238" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3238"><a href="http://www.yalewoo.com/programming/c_cpp">C/C++</a></li>
	<li id="menu-item-3243" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3243"><a href="http://www.yalewoo.com/programming/data_structure">数据结构</a></li>
	<li id="menu-item-3244" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3244"><a href="http://www.yalewoo.com/programming/basic_algorithm">算法</a></li>
	<li id="menu-item-3240" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3240"><a href="http://www.yalewoo.com/programming/online_judge">OJ刷题</a></li>
	<li id="menu-item-3239" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3239"><a href="http://www.yalewoo.com/programming/linux">Linux</a></li>
	<li id="menu-item-3241" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3241"><a href="http://www.yalewoo.com/programming/web">Web</a>
	<ul class="sub-menu">
		<li id="menu-item-3242" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3242"><a href="http://www.yalewoo.com/programming/web/wordpress">wordpress</a></li>
	</ul>
</li>
</ul>
</li>
<li id="menu-item-3245" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-3245"><a href="http://www.yalewoo.com/algorithm">算法</a>
<ul class="sub-menu">
	<li id="menu-item-3248" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3248"><a href="http://www.yalewoo.com/algorithm/maths">数学</a></li>
	<li id="menu-item-3246" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3246"><a href="http://www.yalewoo.com/algorithm/ml_notes">机器学习</a></li>
	<li id="menu-item-3281" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3281"><a href="http://www.yalewoo.com/algorithm/deep_learning">深度学习</a></li>
	<li id="menu-item-3247" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3247"><a href="http://www.yalewoo.com/algorithm/python">python</a></li>
	<li id="menu-item-3253" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3253"><a href="http://www.yalewoo.com/algorithm/%e7%a4%be%e5%9b%a2%e6%a3%80%e6%b5%8b">社团检测</a></li>
</ul>
</li>
<li id="menu-item-3254" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3254"><a href="http://www.yalewoo.com/tools">工具教程</a>
<ul class="sub-menu">
	<li id="menu-item-3255" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3255"><a href="http://www.yalewoo.com/tools/git">Git/GitHub</a></li>
	<li id="menu-item-3256" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3256"><a href="http://www.yalewoo.com/tools/sublime_text">Sublime Text</a></li>
	<li id="menu-item-3257" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3257"><a href="http://www.yalewoo.com/tools/vs2013">VS2013</a></li>
	<li id="menu-item-3259" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3259"><a href="http://www.yalewoo.com/tools/browser">浏览器</a></li>
	<li id="menu-item-3258" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3258"><a href="http://www.yalewoo.com/tools/other_tools">其他工具</a></li>
</ul>
</li>
<li id="menu-item-3260" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3260"><a href="http://www.yalewoo.com/excellent_softwares">软件推荐</a>
<ul class="sub-menu">
	<li id="menu-item-3261" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3261"><a href="http://www.yalewoo.com/excellent_softwares/zip">压缩加密</a></li>
	<li id="menu-item-3262" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3262"><a href="http://www.yalewoo.com/excellent_softwares/pictools">图片工具</a></li>
	<li id="menu-item-3263" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3263"><a href="http://www.yalewoo.com/excellent_softwares/media_tools">多媒体</a></li>
	<li id="menu-item-3264" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3264"><a href="http://www.yalewoo.com/excellent_softwares/safe_software">安全清理</a></li>
	<li id="menu-item-3265" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3265"><a href="http://www.yalewoo.com/excellent_softwares/android">安卓</a></li>
	<li id="menu-item-3266" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3266"><a href="http://www.yalewoo.com/excellent_softwares/utility">实用工具</a></li>
	<li id="menu-item-3267" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3267"><a href="http://www.yalewoo.com/excellent_softwares/search_tools">搜索词典</a></li>
	<li id="menu-item-3268" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3268"><a href="http://www.yalewoo.com/excellent_softwares/efficiency_tools">效率提升</a></li>
	<li id="menu-item-3269" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3269"><a href="http://www.yalewoo.com/excellent_softwares/programming_tools">编程开发</a></li>
	<li id="menu-item-3270" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3270"><a href="http://www.yalewoo.com/excellent_softwares/internet_software">网络软件</a></li>
	<li id="menu-item-3271" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3271"><a href="http://www.yalewoo.com/excellent_softwares/edit_and_reading">阅读编辑</a></li>
</ul>
</li>
<li id="menu-item-3272" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3272"><a href="http://www.yalewoo.com/it_resource">资源</a>
<ul class="sub-menu">
	<li id="menu-item-3273" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3273"><a href="http://www.yalewoo.com/it_resource/good_websites">好网站</a></li>
	<li id="menu-item-3274" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3274"><a href="http://www.yalewoo.com/it_resource/stuff">好资料</a></li>
	<li id="menu-item-3275" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3275"><a href="http://www.yalewoo.com/it_resource/how">授人以渔</a></li>
	<li id="menu-item-3276" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3276"><a href="http://www.yalewoo.com/it_resource/ebooks-share">电子书</a></li>
</ul>
</li>
<li id="menu-item-3277" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3277"><a href="http://www.yalewoo.com/learning">我爱学习</a>
<ul class="sub-menu">
	<li id="menu-item-3278" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3278"><a href="http://www.yalewoo.com/learning/popular_science">科普</a></li>
</ul>
</li>
<li id="menu-item-3280" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3280"><a href="http://www.yalewoo.com/about">关于本站</a></li>
</ul></div></nav>
<script type="text/javascript" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/dianzan.js"></script>


<div id="mbxdh">
		<div>
			
			<a href="http://www.yalewoo.com/algorithm">算法</a> &raquo; <a href="http://www.yalewoo.com/algorithm/%e7%a4%be%e5%9b%a2%e6%a3%80%e6%b5%8b">社团检测</a> &raquo; 重叠社区发现评估指标：标准化互信息NMI计算步骤和C++代码（Normalized Mutual Information）		</div>
</div>
<div id="container">

		<section class="whole_article" id="article-3108">
		<article class="post-3108 post type-post status-publish format-standard hentry category-266" id="entry">
			<h2 id="article-title">

								<span class = "title-meta-yuanchuang title-meta-ico"></span>
				
				<a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html" title="重叠社区发现评估指标：标准化互信息NMI计算步骤和C++代码（Normalized Mutual Information）">重叠社区发现评估指标：标准化互信息NMI计算步骤和C++代码（Normalized Mutual Information）</a>

				


								<span class = "title-meta-huo title-meta-ico"></span>
				

			</h2>
			

            <div class="post-meta">

                <span class="meta-author meta-ico"><a href="http://www.yalewoo.com/author/yalewoo" title="由yalewoo发布" rel="author">yalewoo</a> </span>
            	                <span class="meta-time meta-ico"> 最后修改于 2017-12-14</span>
             	发表于 2017-05-20
                
                
                
                
                <span class="meta-view meta-ico">1,212</span>
                <span class="meta-comment meta-ico"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#comments">3</a></span>

                <br><br>

                <span class="meta-category meta-ico">      <a href="http://www.yalewoo.com/algorithm/%e7%a4%be%e5%9b%a2%e6%a3%80%e6%b5%8b" rel="category tag">社团检测</a> </span>
                <span class="meta-category meta-ico">       </span>

                

                
			</div>
			
			
            <div id="article-content">
				<div id="content-index" class="content-index" style="margin:0 0 10px 10px;float:right;"><span class="content-index-toctoggle">[<a id="content-index-togglelink" href="javascript:content_index_toggleToc()">目录开关</a>]</span>
<script type="text/javascript" language="javascript">
window.content_index_showTocToggle=true;function content_index_toggleToc(){var tts="显示目录";var tth="隐藏目录";if(window.content_index_showTocToggle){window.content_index_showTocToggle=false;document.getElementById("content-index-contents").style.display="block";document.getElementById("content-index-togglelink").innerHTML=tth}else{window.content_index_showTocToggle=true;document.getElementById("content-index-contents").style.display="none";document.getElementById("content-index-togglelink").innerHTML=tts}}
</script>
<ul id="content-index-contents"><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#C++接口" title="C++接口"><em>1</em><span>C++接口</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#求两种划分中的结点个数" title="求两种划分中的结点个数"><em>2</em><span>求两种划分中的结点个数</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#信息熵 H(Xi)" title="信息熵 H(Xi)"><em>3</em><span>信息熵 H(Xi)</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#联合熵 H(Xi,Yj)" title="联合熵 H(Xi,Yj)"><em>4</em><span>联合熵 H(Xi,Yj)</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#条件熵H(Xi|Yj)" title="条件熵H(Xi|Yj)"><em>5</em><span>条件熵H(Xi|Yj)</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#条件熵 H(Xi|Y)" title="条件熵 H(Xi|Y)"><em>6</em><span>条件熵 H(Xi|Y)</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#标准条件熵H(Xi|Y)_norm" title="标准条件熵H(Xi|Y)_norm"><em>7</em><span>标准条件熵H(Xi|Y)_norm</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#条件熵H(X|Y)" title="条件熵H(X|Y)"><em>8</em><span>条件熵H(X|Y)</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#条件熵H(X|Y)_norm" title="条件熵H(X|Y)_norm"><em>9</em><span>条件熵H(X|Y)_norm</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#NMI_LFK" title="NMI_LFK"><em>10</em><span>NMI_LFK</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#改进的NMI" title="改进的NMI"><em>11</em><span>改进的NMI</span></a><ul class="children"><li class="content-index-level-2"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#H(X)" title="H(X)"><em>11.1</em><span>H(X)</span></a></li><li class="content-index-level-2"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#互信息I(X:Y)" title="互信息I(X:Y)"><em>11.2</em><span>互信息I(X:Y)</span></a></li><li class="content-index-level-2"><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#NMI_max" title="NMI_max"><em>11.3</em><span>NMI_max</span></a></li></ul></li></ul></div>
<p><script src="https://cdnjs.cat.net/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></p>
<p>NMI的英文全称是Normalized Mutual Information，中文叫做标准化互信息，它可以用来衡量两种聚类结果的相似度。</p>
<p>本文介绍适用于重叠聚类的NMI计算步骤，重叠指的是，一个节点可以属于多个类别。</p>
<p>假设一个图中的真实社团如下所示：</p>
		<div id="crayon-5aadfc40bf915512086294" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
1 2 3 4
3 4 5 6 7
6 7 8 9</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf915512086294-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf915512086294-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf915512086294-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf915512086294-1"><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-cn">4</span></div><div class="crayon-line" id="crayon-5aadfc40bf915512086294-2"><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-h"> </span><span class="crayon-cn">7</span></div><div class="crayon-line" id="crayon-5aadfc40bf915512086294-3"><span class="crayon-cn">6</span><span class="crayon-h"> </span><span class="crayon-cn">7</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-h"> </span><span class="crayon-cn">9</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>注意上面3和4同时属于社团1和社团2，这就是重叠的含义。</p>
<p>而我们的一个重叠的社团检测算法，得到的结果如下所示：</p>
		<div id="crayon-5aadfc40bf930824809475" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
1 2 3 4 
5 6 7 8 9
7 8 9</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf930824809475-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf930824809475-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf930824809475-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf930824809475-1"><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5aadfc40bf930824809475-2"><span class="crayon-cn">5</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-h"> </span><span class="crayon-cn">7</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-h"> </span><span class="crayon-cn">9</span></div><div class="crayon-line" id="crayon-5aadfc40bf930824809475-3"><span class="crayon-cn">7</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-h"> </span><span class="crayon-cn">9</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>要来比较算法的结果和真实的结果有多大的相似性，就可以使用NMI指标来评估。</p>
<p>参考论文：<a target="_blank" href="http://iopscience.iop.org/article/10.1088/1367-2630/11/3/033015/meta">Detecting the overlapping and hierarchical community structure in complex networks</a></p>
<p>下面的步骤中两种划分方式对应上面的两个文件。</p>
<p><strong>可运行的示例代码下载：<a target="_blank" href="https://yalewoo.ctfile.com/fs/3962903-231410378">NMI.cpp</a></strong></p>
<h3 id="C++接口">C++接口</h3>
<p>NMI的两个参数是两种社区划分方案，可以使用 &lt;vector&lt;vector&lt;int&gt;&gt; 来表示，函数接口如下：</p>
		<div id="crayon-5aadfc40bf937711311675" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
double NMI(vector&lt;vector&lt;int&gt; &gt; &amp; X, vector&lt;vector&lt;int&gt; &gt; &amp; Y)
{
    if (X.size() == 0 || Y.size() == 0)
        return 0;
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf937711311675-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf937711311675-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf937711311675-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf937711311675-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf937711311675-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf937711311675-1"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">NMI</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf937711311675-2"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf937711311675-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf937711311675-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf937711311675-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>X和Y是两种划分，X[0]是X中第1个社团包含的结点向量，X[1]是X中第2个社团包含的结点向量。</p>
<p>如果有一个划分为空，则返回0。</p>
<p>下面使用Xi和Yj表示两种划分中的某个社团。</p>
<h3 id="求两种划分中的结点个数">求两种划分中的结点个数</h3>
<p>后面要用到参与聚类的结点个数，也就是求 X 和 Y中所有元素的个数。使用遍历所有元素加进set的方式，在结点编号不连续时也可以正常工作。</p>
		<div id="crayon-5aadfc40bf93e736650525" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
//返回X和Y中不重复元素个数
int getNodesNum(vector&lt;vector&lt;int&gt; &gt; &amp; X, vector&lt;vector&lt;int&gt; &gt; &amp; Y)
{
	set&lt;int&gt; s;
	for (size_t i = 0; i &lt; X.size(); ++i)
	{
		for (size_t j = 0; j &lt; X[i].size(); ++j)
			s.insert(X[i][j]);
	}
	for (size_t i = 0; i &lt; Y.size(); ++i)
	{
		for (size_t j = 0; j &lt; Y[i].size(); ++j)
			s.insert(Y[i][j]);
	}
	return s.size();
}

double g_nodes_num;
double NMI(vector&lt;vector&lt;int&gt; &gt; &amp; X, vector&lt;vector&lt;int&gt; &gt; &amp; Y)
{
    if (X.size() == 0 || Y.size() == 0)
        return 0;
    g_nodes_num = getNodesNum(X, Y);

}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-5">5</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-6">6</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-7">7</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-8">8</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-9">9</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-10">10</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-11">11</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-12">12</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-13">13</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-14">14</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-15">15</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-16">16</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-17">17</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-18">18</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-19">19</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-20">20</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-21">21</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-22">22</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-23">23</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-24">24</div><div class="crayon-num" data-line="crayon-5aadfc40bf93e736650525-25">25</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-1"><span class="crayon-c">//返回X和Y中不重复元素个数</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-2"><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">getNodesNum</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-3"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-4"><span class="crayon-h">	</span><span class="crayon-v">set</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-5"><span class="crayon-h">	</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">size</span><span class="crayon-sy">_</span>t<span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-v">i</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-6"><span class="crayon-h">	</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-7"><span class="crayon-h">		</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">size</span><span class="crayon-sy">_</span>t<span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-v">j</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-8"><span class="crayon-h">			</span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-e">insert</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-v">j</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-9"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-10"><span class="crayon-h">	</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">size</span><span class="crayon-sy">_</span>t<span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-v">i</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-11"><span class="crayon-h">	</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-12"><span class="crayon-h">		</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">size</span><span class="crayon-sy">_</span>t<span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-v">j</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-13"><span class="crayon-h">			</span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-e">insert</span><span class="crayon-sy">(</span><span class="crayon-v">Y</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-v">j</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-14"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-15"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-16"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-17">&nbsp;</div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-18"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">g_nodes_num</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-19"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">NMI</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-20"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">g_nodes_num</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">getNodesNum</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-24">&nbsp;</div><div class="crayon-line" id="crayon-5aadfc40bf93e736650525-25"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>为了函数传入参数的简洁，使用全局变量double g_nodes_num记录结点个数。</p>
<h3 id="信息熵 H(Xi)">信息熵 H(Xi)</h3>
<p>这里的Xi指的是划分中的一个社团，也就是一个vector&lt;int&gt; ，它的信息熵怎么求呢？</p>
<p>Xi的形式是这样的 [1 2 3 4]表示结点1,2,3,4一共4个结点属于该社团。由于例子中共有9个不重复结点，自然有9-4=5个结点不属于该社团。</p>
<p>把Xi看做随机变量，它表示的是节点属于该社团。Xi=1表示结点属于该社团，Xi=0表示结点不属于该社团，那么根据上面实际属于该社团的结点个数，可以得到Xi的概率分布：</p>
<p>P(Xi = 1) = 4 / 9</p>
<p>P(Xi = 0) = 1 &#8211; P(Xi)</p>
<p>根据信息熵的定义</p>
<p>$$h(x) = &#8211; x * log(x) $$</p>
<p>$$H(X) = \sum_i h(P(X = X_i))$$</p>
<p>可以得到</p>
<p>$$H(X_i) = h(P(Xi = 1)) + h(P(Xi = 0))$$</p>
<p>从公式可以看出，一个社团的信息熵，只和这个社团的结点数目以及总结点个数有关。准确的说，是和社团中结点个数占总数的比例有关，而与具体哪个结点没有关系。设这个比例为x，则H(Xi)的函数为</p>
<p>$$f(x) = -x * log(x) &#8211; (1-x) * log(1-x)$$</p>
<p>这个函数的图像如下；</p>
<p><a target="_blank" href="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/05/scrn20170520215824.png"><img class="alignnone size-full wp-image-3115" data-original="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/05/scrn20170520215824.png" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" alt="" width="414" height="315" /></a></p>
<noscript><img class="alignnone size-full wp-image-3115" src="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/05/scrn20170520215824.png" alt="" width="414" height="315" /></a></p></noscript>
<p>可见，一个社团的信息熵，从0开始随着结点数目的增加而增加，增加到一半结点时达到最大值1，最后随着结点增加减小至0 。</p>
<p>从上面的函数图象可以看出H(Xi)这个函数是关于0.5对称的，也就是说，一个社团有 x 个结点和有 (n-x)个结点，他们的信息熵相等</p>
<p>代码如下</p>
		<div id="crayon-5aadfc40bf947104781213" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
double log2(double x)
{
	return log(x) / log(2);
}
double h(double x)
{
	if (x &gt; 0)
		return -1 * x * log2(x);
	else
		return 0;
}
double H(vector&lt;int&gt; &amp; Xi)
{
	double p1 = Xi.size() / g_nodes_num;
	double p0 = 1 - p1;
	return h(p0) + h(p1);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-5">5</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-6">6</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-7">7</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-8">8</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-9">9</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-10">10</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-11">11</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-12">12</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-13">13</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-14">14</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-15">15</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-16">16</div><div class="crayon-num" data-line="crayon-5aadfc40bf947104781213-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf947104781213-1"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">log2</span><span class="crayon-sy">(</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-2"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-3"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-4"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-5"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-6"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-7"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-8"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e">log2</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-9"><span class="crayon-h">	</span><span class="crayon-st">else</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-10"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-11"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-12"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Xi</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-13"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-14"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">p1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Xi</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">g_nodes_num</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-15"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">p0</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">p1</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-16"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">p0</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">p1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf947104781213-17"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p></p>
<h3 id="联合熵 H(Xi,Yj)">联合熵 H(Xi,Yj)</h3>
<p>Xi和Yj分别是一个社团，把Xi和Yj看做多维随机变量，它们的取值就有4种情况：</p>
<p>Xi=1, Yj=1 ，表示结点同时属于这两个社团。那实际中的结点个数就是 Xi 和 Yj 的交集的元素个数。</p>
<p>Xi=0, Yj=1， 表示结点属于社团Xi，但不属于社团Yj。 这样的结点个数是 Xi 和 Yj 的差集的元素个数。</p>
<p>Xi=0, Yj=1， 表示结点属于社团Xi，但不属于社团Yj。 这样的结点个数是 Yj 和 Xi 的差集的元素个数。</p>
<p>Xi=0, Yj=0，表示结点既不属于社团Xi，也不属于社团Yj。这样的结点个数是 总结点个数 &#8211; 上面三种情况的结点个数。</p>
<p>这些结点个数 除以 总结点个数，就可以得到这四种情况的概率值：P00,P01,P10,P11。</p>
<p>应用信息熵的公式，得到</p>
<p>$$H(X_i, Y_j) = h(P(Xi=1, Yj=1)) + h(p(Xi=0, Yj=1)) + h(p(Xi=1, Yj=0)) + h(p(Xi=0, Yj=0))$$</p>
<p>之所以求这个是为了下面求条件熵方便。看一个特殊情况，当Xi和Yj是完全一致的时候，一个节点要么同时属于X和Y，要么同时不属于X和Y，此时p(Xi=0, Yj=1)和p(Xi=1， Yj=0)的值都是0，也就是</p>
<p>$$H(X_i, Y_j) = h(P(Xi=1, Yj=1)) + h(p(Xi=0, Yj=0)) = H(X_i) = H(Y_j)，当X_i和Y_j一致时$$</p>
<p>有一个意外的情况出现了，当X和Y两个社团互补的时候，也就是X和Y没有公共元素，但他们的并集组成全集，此时 同时属于X和Y 或者 同时不属于X和Y 的结点数是0，公式中第1项和第4项是0，由于H(Xi)的对称性，这同样导致</p>
<p>$$H(X_i, Y_j) = h(P(Xi=1, Yj=0)) + h(p(Xi=0, Yj=1)) = H(X_i) = H(Y_j)，当X_i和Y_j互补时$$</p>
<p>在其他情况下，由于P00,P01,P10,P11四个相加之和为1，H(Xi, Yj) 会小于H(Xi)和H(Yj)</p>
		<div id="crayon-5aadfc40bf950093407713" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
//返回a和b的交集
vector&lt;int&gt; intersection(vector&lt;int&gt;&amp; a, vector&lt;int&gt;&amp; b)
{
	sort(a.begin(), a.end());
	sort(b.begin(), b.end());

	vector&lt;int&gt; res(max(a.size(), b.size()));
	auto iter = std::set_intersection(a.begin(), a.end(), b.begin(), b.end(), res.begin());
	res.resize(iter - res.begin());

	return res;
}
//返回a和b的差集
vector&lt;int&gt; difference(vector&lt;int&gt;&amp; a, vector&lt;int&gt;&amp; b)
{
	sort(a.begin(), a.end());
	sort(b.begin(), b.end());

	vector&lt;int&gt; res(max(a.size(), b.size()));
	auto iter = std::set_difference(a.begin(), a.end(), b.begin(), b.end(), res.begin());
	res.resize(iter - res.begin());

	return res;
}
//H(Xi, Yj)
double H_Xi_joint_Yj(vector&lt;int&gt; &amp; Xi, vector&lt;int&gt; &amp; Yj)
{
	double P11 = intersection(Xi, Yj).size() / g_nodes_num;
	double P10 = difference(Xi, Yj).size() / g_nodes_num;
	double P01 = difference(Yj, Xi).size() / g_nodes_num;
	double P00 = 1 - P11 - P10 - P01;
	return h(P11) + h(P10) + h(P01) + h(P00);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-5">5</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-6">6</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-7">7</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-8">8</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-9">9</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-10">10</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-11">11</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-12">12</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-13">13</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-14">14</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-15">15</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-16">16</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-17">17</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-18">18</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-19">19</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-20">20</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-21">21</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-22">22</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-23">23</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-24">24</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-25">25</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-26">26</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-27">27</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-28">28</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-29">29</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-30">30</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-31">31</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-32">32</div><div class="crayon-num" data-line="crayon-5aadfc40bf950093407713-33">33</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf950093407713-1"><span class="crayon-c">//返回a和b的交集</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-2"><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">intersection</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-3"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-4"><span class="crayon-h">	</span><span class="crayon-e">sort</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-st">end</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-5"><span class="crayon-h">	</span><span class="crayon-e">sort</span><span class="crayon-sy">(</span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-st">end</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-6">&nbsp;</div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-7"><span class="crayon-h">	</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">res</span><span class="crayon-sy">(</span><span class="crayon-e">max</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-8"><span class="crayon-h">	</span><span class="crayon-e">auto </span><span class="crayon-v">iter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">std</span><span class="crayon-o">::</span><span class="crayon-e">set_intersection</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-st">end</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-st">end</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-9"><span class="crayon-h">	</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">resize</span><span class="crayon-sy">(</span><span class="crayon-v">iter</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-10">&nbsp;</div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-11"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-12"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-13"><span class="crayon-c">//返回a和b的差集</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-14"><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">difference</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-15"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-16"><span class="crayon-h">	</span><span class="crayon-e">sort</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-st">end</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-17"><span class="crayon-h">	</span><span class="crayon-e">sort</span><span class="crayon-sy">(</span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-st">end</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-18">&nbsp;</div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-19"><span class="crayon-h">	</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">res</span><span class="crayon-sy">(</span><span class="crayon-e">max</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-20"><span class="crayon-h">	</span><span class="crayon-e">auto </span><span class="crayon-v">iter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">std</span><span class="crayon-o">::</span><span class="crayon-e">set_difference</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-st">end</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-st">end</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-21"><span class="crayon-h">	</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">resize</span><span class="crayon-sy">(</span><span class="crayon-v">iter</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-22">&nbsp;</div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-23"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-24"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-25"><span class="crayon-c">//H(Xi, Yj)</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-26"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_joint_Yj</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Yj</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-27"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-28"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">P11</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">intersection</span><span class="crayon-sy">(</span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Yj</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">g_nodes_num</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-29"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">P10</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">difference</span><span class="crayon-sy">(</span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Yj</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">g_nodes_num</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-30"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">P01</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">difference</span><span class="crayon-sy">(</span><span class="crayon-v">Yj</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Xi</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">g_nodes_num</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-31"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">P00</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">P11</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">P10</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">P01</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-32"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P11</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P10</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P01</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P00</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf950093407713-33"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p></p>
<h3 id="条件熵H(Xi|Yj)">条件熵H(Xi|Yj)</h3>
<p>两个社团的条件熵公式</p>
<p>$$H(X_i|Y_j) = H(X_i, Y_j) &#8211; H(Y_j)$$</p>
<p>这个表示的是社团Xi和Yj的差异程度。当Xi和Yj完全相同的时候，H(X_i, Y_j) = H(Y_j)，此时H(X_i|Y_j) = 0 ；而Xi和Yj有区别的时候，这个值就会大于0</p>
<p>意外情况是，Xi和Yj互补的时候，H(X_i|Y_j) = 0也成立，这是我们不愿意看到的。因此这里设置一个变通：</p>
<p>当</p>
<p>$$h(P00)+h(P11) \ge h(P01)+h(P10)$$</p>
<p>的时候</p>
<p>$$H(X_i|Y_j) = H(X_i, Y_j) &#8211; H(Y_j)，when h(P00)+h(P11) \ge h(P01)+h(P10)$$</p>
<p>而条件不满足时，也就意味着同时属于或不属于Xi和Yj的结点数要小于 仅在一个社团的结点数目，也就是两个社团有互补的趋势，由于上面的讨论，趋近互补时，H(X_i, Y_j)会趋近H(Yj)导致这个值也趋近0，然而两个社团互补我们认为他们非常不相似，这时定义</p>
<p>$$H(X_i|Y_j) = H(X_i)，when h(P00)+h(P11) &lt; h(P01)+h(P10) $$</p>
<p>由于我们的代码中P00，P01这些变量计算是在H_Xi_joint_Yj函数中，我们修改了这个函数使本节函数符合上面的两种情况</p>
		<div id="crayon-5aadfc40bf959958308152" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
//H(Xi, Yj)
double H_Xi_joint_Yj(vector&lt;int&gt; &amp; Xi, vector&lt;int&gt; &amp; Yj)
{
	double P11 = intersection(Xi, Yj).size() / g_nodes_num;
	double P10 = difference(Xi, Yj).size() / g_nodes_num;
	double P01 = difference(Yj, Xi).size() / g_nodes_num;
	double P00 = 1 - P11 - P10 - P01;

	if (h(P11) + h(P00) &gt;= h(P01) + h(P10))
		return h(P11) + h(P10) + h(P01) + h(P00);
	else
		return H(Xi) + H(Yj); //求条件熵时再减去H(Yj)正好是H(Xi)
}
//H(Xi|Yj)
double H_Xi_given_Yj(vector&lt;int&gt; &amp; Xi, vector&lt;int&gt; &amp; Yj)
{
	return H_Xi_joint_Yj(Xi, Yj) - H(Yj);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-5">5</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-6">6</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-7">7</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-8">8</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-9">9</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-10">10</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-11">11</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-12">12</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-13">13</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-14">14</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-15">15</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-16">16</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-17">17</div><div class="crayon-num" data-line="crayon-5aadfc40bf959958308152-18">18</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf959958308152-1"><span class="crayon-c">//H(Xi, Yj)</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-2"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_joint_Yj</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Yj</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-3"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-4"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">P11</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">intersection</span><span class="crayon-sy">(</span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Yj</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">g_nodes_num</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-5"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">P10</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">difference</span><span class="crayon-sy">(</span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Yj</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">g_nodes_num</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-6"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">P01</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">difference</span><span class="crayon-sy">(</span><span class="crayon-v">Yj</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Xi</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">g_nodes_num</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-7"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">P00</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">P11</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">P10</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">P01</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-8">&nbsp;</div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-9"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P11</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P00</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P01</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P10</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-10"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P11</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P10</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P01</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">h</span><span class="crayon-sy">(</span><span class="crayon-v">P00</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-11"><span class="crayon-h">	</span><span class="crayon-st">else</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-12"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">Xi</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">Yj</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">//求条件熵时再减去H(Yj)正好是H(Xi)</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-13"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-14"><span class="crayon-c">//H(Xi|Yj)</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-15"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_given_Yj</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Yj</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-16"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-17"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_joint_Yj</span><span class="crayon-sy">(</span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Yj</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">Yj</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf959958308152-18"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p></p>
<h3 id="条件熵 H(Xi|Y)">条件熵 H(Xi|Y)</h3>
<p>H(Xi|Y) = min{H(Xi|Yj)} for all j ，也就是从Y中找出一个和Xi匹配最好的条件熵的值</p>
		<div id="crayon-5aadfc40bf95f998849084" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
//H(Xi|Y) return min{H(Xi|Yj)} for all j
double H_Xi_given_Y(vector&lt;int&gt; &amp; Xi, vector&lt;vector&lt;int&gt; &gt; &amp; Y)
{
	double res = H_Xi_given_Yj(Xi, Y[0]);
	for (size_t i = 1; i &lt; Y.size(); ++i)
	{
		res = min(res, H_Xi_given_Yj(Xi, Y[i]));
	}
	return res;
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf95f998849084-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf95f998849084-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf95f998849084-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf95f998849084-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf95f998849084-5">5</div><div class="crayon-num" data-line="crayon-5aadfc40bf95f998849084-6">6</div><div class="crayon-num" data-line="crayon-5aadfc40bf95f998849084-7">7</div><div class="crayon-num" data-line="crayon-5aadfc40bf95f998849084-8">8</div><div class="crayon-num" data-line="crayon-5aadfc40bf95f998849084-9">9</div><div class="crayon-num" data-line="crayon-5aadfc40bf95f998849084-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf95f998849084-1"><span class="crayon-c">//H(Xi|Y) return min{H(Xi|Yj)} for all j</span></div><div class="crayon-line" id="crayon-5aadfc40bf95f998849084-2"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_given_Y</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf95f998849084-3"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf95f998849084-4"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_given_Yj</span><span class="crayon-sy">(</span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf95f998849084-5"><span class="crayon-h">	</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">size</span><span class="crayon-sy">_</span>t<span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-v">i</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf95f998849084-6"><span class="crayon-h">	</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf95f998849084-7"><span class="crayon-h">		</span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">min</span><span class="crayon-sy">(</span><span class="crayon-v">res</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_given_Yj</span><span class="crayon-sy">(</span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf95f998849084-8"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf95f998849084-9"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf95f998849084-10"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p></p>
<h3 id="标准条件熵H(Xi|Y)_norm">标准条件熵H(Xi|Y)_norm</h3>
<p>标准的意思就是把它变成取值0-1之间，公式为</p>
<p>$$H(X_i|Y)_{norm} =\frac{ H(X_i|Y) }{ H(X_i)}$</p>
		<div id="crayon-5aadfc40bf965259921473" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
//H(Xi|Y)_norm
double H_Xi_given_Y_norm(vector&lt;int&gt; &amp; Xi, vector&lt;vector&lt;int&gt; &gt; &amp; Y)
{
	return H_Xi_given_Y(Xi, Y) / H(Xi);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf965259921473-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf965259921473-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf965259921473-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf965259921473-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf965259921473-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf965259921473-1"><span class="crayon-c">//H(Xi|Y)_norm</span></div><div class="crayon-line" id="crayon-5aadfc40bf965259921473-2"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_given_Y_norm</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf965259921473-3"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf965259921473-4"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_given_Y</span><span class="crayon-sy">(</span><span class="crayon-v">Xi</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">Xi</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf965259921473-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p></p>
<h3 id="条件熵H(X|Y)">条件熵H(X|Y)</h3>
<p>这个就是遍历X中的所有Xi，把 H(X_i|Y) 相加</p>
		<div id="crayon-5aadfc40bf96b853874626" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
//H(X|Y) = sum {H(Xi|Y)}
double H_X_given_Y(vector&lt;vector&lt;int&gt; &gt; &amp; X, vector&lt;vector&lt;int&gt; &gt; &amp; Y)
{
	double res = 0;
	for (size_t i = 0; i &lt; X.size(); ++i)
	{
		res += H_Xi_given_Y(X[i], Y);
	}

	return res;
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-5">5</div><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-6">6</div><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-7">7</div><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-8">8</div><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-9">9</div><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-10">10</div><div class="crayon-num" data-line="crayon-5aadfc40bf96b853874626-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-1"><span class="crayon-c">//H(X|Y) = sum {H(Xi|Y)}</span></div><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-2"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">H_X_given_Y</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-3"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-4"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-5"><span class="crayon-h">	</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">size</span><span class="crayon-sy">_</span>t<span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-v">i</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-6"><span class="crayon-h">	</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-7"><span class="crayon-h">		</span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_given_Y</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-8"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-9">&nbsp;</div><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-10"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf96b853874626-11"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p></p>
<h3 id="条件熵H(X|Y)_norm">条件熵H(X|Y)_norm</h3>
<p>这个就是遍历X中的所有Xi，假设有k个，把H(X_i|Y)_norm相加，然后除以k</p>
<p>$$H(X|Y)_{norm} = \frac{1}{k} \sum_i^k  H(X_i|Y)_{norm}$</p>
		<div id="crayon-5aadfc40bf971818689506" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
//H(X|Y)_norm
double H_X_given_Y_norm(vector&lt;vector&lt;int&gt; &gt; &amp; X, vector&lt;vector&lt;int&gt; &gt; &amp; Y)
{
	double res = 0;
	for (size_t i = 0; i &lt; X.size(); ++i)
	{
		res += H_Xi_given_Y_norm(X[i], Y);
	}

	return res / X.size();
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-5">5</div><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-6">6</div><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-7">7</div><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-8">8</div><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-9">9</div><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-10">10</div><div class="crayon-num" data-line="crayon-5aadfc40bf971818689506-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf971818689506-1"><span class="crayon-c">//H(X|Y)_norm</span></div><div class="crayon-line" id="crayon-5aadfc40bf971818689506-2"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">H_X_given_Y_norm</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf971818689506-3"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf971818689506-4"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf971818689506-5"><span class="crayon-h">	</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">size</span><span class="crayon-sy">_</span>t<span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-v">i</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf971818689506-6"><span class="crayon-h">	</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf971818689506-7"><span class="crayon-h">		</span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-e">H_Xi_given_Y_norm</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf971818689506-8"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf971818689506-9">&nbsp;</div><div class="crayon-line" id="crayon-5aadfc40bf971818689506-10"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf971818689506-11"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p></p>
<h3 id="NMI_LFK">NMI_LFK</h3>
<p>有了上面的准备工作，我们终于可以轻松的根据公式</p>
<p>$$NMI(X,Y) = 1 &#8211; \frac{1}{2} [H(X|Y)_{norm} + H(Y|X)_{norm}]$$</p>
<p>写出计算NMI的代码啦</p>
<p>从公式也可以看出，NMI的计算对应X和Y的顺序没有关系，也就是NMI(X,Y) = NMI(Y,X)</p>
		<div id="crayon-5aadfc40bf977099494560" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
double NMI(vector&lt;vector&lt;int&gt; &gt; &amp; X, vector&lt;vector&lt;int&gt; &gt; &amp; Y)
{
	if (X.size() == 0 || Y.size() == 0)
		return 0;
	g_nodes_num = getNodesNum(X, Y);

	return 1 - 0.5 * (H_X_given_Y_norm(X, Y) + H_X_given_Y_norm(Y, X));
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf977099494560-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf977099494560-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf977099494560-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf977099494560-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf977099494560-5">5</div><div class="crayon-num" data-line="crayon-5aadfc40bf977099494560-6">6</div><div class="crayon-num" data-line="crayon-5aadfc40bf977099494560-7">7</div><div class="crayon-num" data-line="crayon-5aadfc40bf977099494560-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf977099494560-1"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">NMI</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf977099494560-2"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf977099494560-3"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf977099494560-4"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf977099494560-5"><span class="crayon-h">	</span><span class="crayon-v">g_nodes_num</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">getNodesNum</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf977099494560-6">&nbsp;</div><div class="crayon-line" id="crayon-5aadfc40bf977099494560-7"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">0.5</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">H_X_given_Y_norm</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">H_X_given_Y_norm</span><span class="crayon-sy">(</span><span class="crayon-v">Y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf977099494560-8"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>这个NMI的计算是Andrea Lancichinetti, Santo Fortunato and János Kertész三个人在论文论文：<a target="_blank" href="http://iopscience.iop.org/article/10.1088/1367-2630/11/3/033015/meta">Detecting the overlapping and hierarchical community structure in complex networks</a> 中提出的，因此可以记为NMI_LFK</p>
<h3 id="改进的NMI">改进的NMI</h3>
<p>论文 <a target="_blank" href="https://arxiv.org/abs/1110.2515">Normalized Mutual Information to evaluate overlapping community finding algorithms </a>对LFk提出的NMI提出了改进：</p>
<p>论文指出，LFK提出的NMI计算方法，在一些特殊情况表现不佳：</p>
<p>情况一：</p>
<p>若 X包含很多社团，而Y仅仅包含一个社团，Y中仅有的一个社团和X中的某个社团完全一致。根据直觉，这两种划分方式应该很不一样。X中若包含k个社团，Y中仅有一个社团和X中的某个社团一致，根据直觉NMI值应该大约为 1/k</p>
<p>但在LFK的NMI计算中</p>
<p>$$NMI_{LFK}(X,Y) = 1 &#8211; \frac{1}{2} [H(X|Y)_{norm} + H(Y|X)_{norm}]$$</p>
<p>H(Y|X) 这个的值是0，这导致NMI_LFK的值会大于0.5</p>
<p>情况二：</p>
<p>Y中包含了所有可能的社团组合。此时会有 H(X|Y)=0 ,NMI_LFK的值也会大于0.5</p>
<h4 id="H(X)">H(X)</h4>
<p>这个是所有的H(Xi)相加。</p>
		<div id="crayon-5aadfc40bf97f501010932" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
//H(X)
double H(vector&lt;vector&lt;int&gt; &gt; &amp; X)
{
	double res = 0;
	for (size_t i = 0; i &lt; X.size(); ++i)
	{
		res += H(X[i]);
	}
	return res;
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf97f501010932-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf97f501010932-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf97f501010932-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf97f501010932-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf97f501010932-5">5</div><div class="crayon-num" data-line="crayon-5aadfc40bf97f501010932-6">6</div><div class="crayon-num" data-line="crayon-5aadfc40bf97f501010932-7">7</div><div class="crayon-num" data-line="crayon-5aadfc40bf97f501010932-8">8</div><div class="crayon-num" data-line="crayon-5aadfc40bf97f501010932-9">9</div><div class="crayon-num" data-line="crayon-5aadfc40bf97f501010932-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf97f501010932-1"><span class="crayon-c">//H(X)</span></div><div class="crayon-line" id="crayon-5aadfc40bf97f501010932-2"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf97f501010932-3"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf97f501010932-4"><span class="crayon-h">	</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf97f501010932-5"><span class="crayon-h">	</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">size</span><span class="crayon-sy">_</span>t<span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-v">i</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf97f501010932-6"><span class="crayon-h">	</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf97f501010932-7"><span class="crayon-h">		</span><span class="crayon-v">res</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf97f501010932-8"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aadfc40bf97f501010932-9"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf97f501010932-10"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p></p>
<h4 id="互信息I(X:Y)">互信息I(X:Y)</h4>
<p><a target="_blank" href="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/05/scrn20170521104020.png"><img class="alignnone size-full wp-image-3120" data-original="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/05/scrn20170521104020.png" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" alt="" width="788" height="460" /></a></p>
<noscript><img class="alignnone size-full wp-image-3120" src="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/05/scrn20170521104020.png" alt="" width="788" height="460" /></a></p></noscript>
<p>$$I(X:Y) = \frac{1}{2} ( H(X) + H(Y) &#8211; H(X|Y) &#8211; H(Y|X) )$</p>
		<div id="crayon-5aadfc40bf985522070085" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
//I(X:Y)
double I(vector&lt;vector&lt;int&gt; &gt; &amp; X, vector&lt;vector&lt;int&gt; &gt; &amp; Y)
{
	return 0.5 * (H(X) + H(Y) - H_X_given_Y(X, Y) - H_X_given_Y(Y, X));
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf985522070085-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf985522070085-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf985522070085-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf985522070085-4">4</div><div class="crayon-num" data-line="crayon-5aadfc40bf985522070085-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf985522070085-1"><span class="crayon-c">//I(X:Y)</span></div><div class="crayon-line" id="crayon-5aadfc40bf985522070085-2"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">I</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf985522070085-3"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf985522070085-4"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-cn">0.5</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">H_X_given_Y</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">H_X_given_Y</span><span class="crayon-sy">(</span><span class="crayon-v">Y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf985522070085-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p></p>
<h4 id="NMI_max">NMI_max</h4>
<p>$$NMI_{max} = \frac{I(X:Y)}{max ( (H(X), H(Y) )}$</p>
		<div id="crayon-5aadfc40bf98b637246879" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
double NMI_max(vector&lt;vector&lt;int&gt; &gt; &amp; X, vector&lt;vector&lt;int&gt; &gt; &amp; Y)
{
	return I(X,Y) / max(H(X), H(Y));
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aadfc40bf98b637246879-1">1</div><div class="crayon-num" data-line="crayon-5aadfc40bf98b637246879-2">2</div><div class="crayon-num" data-line="crayon-5aadfc40bf98b637246879-3">3</div><div class="crayon-num" data-line="crayon-5aadfc40bf98b637246879-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aadfc40bf98b637246879-1"><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">NMI_max</span><span class="crayon-sy">(</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-v">vector</span><span class="crayon-o">&lt;</span><span class="crayon-t">int</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aadfc40bf98b637246879-2"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aadfc40bf98b637246879-3"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">I</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-e">max</span><span class="crayon-sy">(</span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">H</span><span class="crayon-sy">(</span><span class="crayon-v">Y</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aadfc40bf98b637246879-4"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>&nbsp;</p>
			</div>
		</article>

		<div class="social-main">
			<div class="post-like">
			    <a href="javascript:;" data-action="ding" data-id="3108" class="specsZan ">点赞 <span class="count">
			        10</span>
			    </a>
			</div>

			<div class="reward-button"><a href="http://www.yalewoo.com/denote" target="_blank">赏</a> 
				<span class="reward-code">
					<span class="alipay-code"> <img class="alipay-img wdp-appear" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/alipay.png"><b>支付宝打赏</b> </span> <span class="wechat-code"> <img class="wechat-img wdp-appear" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/wechatpay.png"><b>微信打赏</b> </span>
				</span>
			</div>

			<div class="post-like">
			    <a id="fenxianganniu" onClick="show_bdsharebox();">分享
			    </a>
			</div>

			<div class="bdsharebuttonbox" id="bdsharebuttonbox">
				
			</div>
			

			

		</div>
		
		<div class="reward-notice">
			<p class="">如果文章对你有帮助，欢迎点赞或打赏（金额不限）。你的打赏将全部用于支付网站服务器费用和提高网站文章质量，谢谢支持。</p>
		</div>
		
			
		

		



		

		

		<div class="article-copyright">
                			<b> 版权声明: </b>
    			<p> 本文由 <a href="http://www.yalewoo.com/author/yalewoo" title="由yalewoo发布" rel="author">yalewoo</a> 原创，商业转载请联系作者获得授权。 <br>非商业转载请注明作者 <a href="http://www.yalewoo.com/author/yalewoo" title="由yalewoo发布" rel="author">yalewoo</a> 或 <a href="http://www.yalewoo.com/" title="雅乐网" ?>雅乐网</a> ，并附带本文链接：<br><a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html" title=重叠社区发现评估指标：标准化互信息NMI计算步骤和C++代码（Normalized Mutual Information）>http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html</a></p>
						</div>

		<div class="post-navigation">
			<div class="post-previous">
				<p>上一篇：</p>
				<a href="http://www.yalewoo.com/calc_modularity_cpp.html" rel="prev">Modularity计算的C++代码</a>			</div>
			<div class="post-next">
				<p>下一篇：</p>
				<a href="http://www.yalewoo.com/spyder_cannot_open.html" rel="next">Spyder打不开 点击没反应</a>			</div>
		</div>


		<div class="related_posts">
			<p>与  相关的文章</p>
			<ul>
										<li><a rel="bookmark" href="http://www.yalewoo.com/calc_modularity_cpp.html"  title="Modularity计算的C++代码" target="_blank">Modularity计算的C++代码</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/community_detection_algorithm_call.html"  title="社团检测常用算法调用总结" target="_blank">社团检测常用算法调用总结</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/modularity_community_detection.html"  title="Modularity的计算方法——社团检测中模块度计算公式详解" target="_blank">Modularity的计算方法——社团检测中模块度计算公式详解</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/social_network_analysis_note_1_introduction.html"  title="Social Network Analysis笔记1：介绍" target="_blank">Social Network Analysis笔记1：介绍</a></li>
								</ul>
		</div>



		<div class="comments-template">
    		


<div id="comments" class="comments-area">

			<h3 class="comments-title">
		文章《重叠社区发现评估指标：标准化互信息NMI计算步骤和C++代码（Normalized Mutual Information）》共有3条评论：
		</h3>

		
		<ol class="comment-list">
				<li class="comment even thread-even depth-1" id="li-comment-701">
		<div id="comment-701" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://2.gravatar.com/avatar/ea3c83f48254afd44c5a680b03cd3ac7?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://2.gravatar.com/avatar/ea3c83f48254afd44c5a680b03cd3ac7?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />
<noscript><img alt='' src='http://2.gravatar.com/avatar/ea3c83f48254afd44c5a680b03cd3ac7?s=64&#038;d=identicon&#038;r=g' srcset='http://2.gravatar.com/avatar/ea3c83f48254afd44c5a680b03cd3ac7?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				常振海   				</div>
  				
  				<p>大侠您好，我按照您的程序顺序连接，建立了一个.cpp文件，想用来计算overlapping时的NMI,但在执行时遇到下面的问题：fatal error C1004: 发现意外的文件尾，不知该怎样进行调整 ？请您指教！ 谢谢！<br />
#include<br />
#ifndef _INC_MATH<br />
#define _INC_MATH<br />
#include<br />
#include<br />
using namespace std;<br />
double NMI(vector&lt;vector &gt; &amp; X, vector&lt;vector &gt; &amp; Y)<br />
{<br />
    if (X.size() == 0 || Y.size() == 0)<br />
        return 0;<br />
}</p>
<p>//返回X和Y中不重复元素个数<br />
int getNodesNum(vector&lt;vector &gt; &amp; X, vector&lt;vector &gt; &amp; Y)<br />
{<br />
	set s;<br />
	for (size_t i = 0; i &lt; X.size(); ++i)<br />
	{<br />
		for (size_t j = 0; j &lt; X[i].size(); ++j)<br />
			s.insert(X[i][j]);<br />
	}<br />
	for (size_t i = 0; i &lt; Y.size(); ++i)<br />
	{<br />
		for (size_t j = 0; j &lt; Y[i].size(); ++j)<br />
			s.insert(Y[i][j]);<br />
	}<br />
	return s.size();<br />
}</p>
<p>double g_nodes_num;<br />
double NMI(vector&lt;vector &gt; &amp; X, vector&lt;vector &gt; &amp; Y)<br />
{<br />
    if (X.size() == 0 || Y.size() == 0)<br />
        return 0;<br />
    g_nodes_num = getNodesNum(X, Y);</p>
<p>} //为了函数传入参数的简洁，使用全局变量double g_nodes_num记录结点个数</p>
<p>//entropy<br />
double log2(double x)<br />
{<br />
	return log(x) / log(2);<br />
}<br />
double h(double x)<br />
{<br />
	if (x &gt; 0)<br />
		return -1 * x * log2(x);<br />
	else<br />
		return 0;<br />
}<br />
double H(vector &amp; Xi)<br />
{<br />
	double p1 = Xi.size() / g_nodes_num;<br />
	double p0 = 1 &#8211; p1;<br />
	return h(p0) + h(p1);<br />
}</p>
<p>//返回a和b的交集<br />
vector intersection(vector&amp; a, vector&amp; b)<br />
{<br />
	sort(a.begin(), a.end());<br />
	sort(b.begin(), b.end());</p>
<p>	vector res(max(a.size(), b.size()));<br />
	auto iter = std::set_intersection(a.begin(), a.end(), b.begin(), b.end(), res.begin());<br />
	res.resize(iter &#8211; res.begin());</p>
<p>	return res;<br />
}<br />
//返回a和b的差集<br />
vector difference(vector&amp; a, vector&amp; b)<br />
{<br />
	sort(a.begin(), a.end());<br />
	sort(b.begin(), b.end());</p>
<p>	vector res(max(a.size(), b.size()));<br />
	auto iter = std::set_difference(a.begin(), a.end(), b.begin(), b.end(), res.begin());<br />
	res.resize(iter &#8211; res.begin());</p>
<p>	return res;<br />
}</p>
<p>//H(Xi, Yj)<br />
double H_Xi_joint_Yj(vector &amp; Xi, vector &amp; Yj)<br />
{<br />
	double P11 = intersection(Xi, Yj).size() / g_nodes_num;<br />
	double P10 = difference(Xi, Yj).size() / g_nodes_num;<br />
	double P01 = difference(Yj, Xi).size() / g_nodes_num;<br />
	double P00 = 1 &#8211; P11 &#8211; P10 &#8211; P01;<br />
	return h(P11) + h(P10) + h(P01) + h(P00);<br />
}<br />
//H(Xi, Yj)<br />
double H_Xi_joint_Yj(vector &amp; Xi, vector &amp; Yj)<br />
{<br />
	double P11 = intersection(Xi, Yj).size() / g_nodes_num;<br />
	double P10 = difference(Xi, Yj).size() / g_nodes_num;<br />
	double P01 = difference(Yj, Xi).size() / g_nodes_num;<br />
	double P00 = 1 &#8211; P11 &#8211; P10 &#8211; P01;</p>
<p>	if (h(P11) + h(P00) &gt;= h(P01) + h(P10))<br />
		return h(P11) + h(P10) + h(P01) + h(P00);<br />
	else<br />
		return H(Xi) + H(Yj); //求条件熵时再减去H(Yj)正好是H(Xi)<br />
}</p>
<p>//H(Xi|Yj)<br />
double H_Xi_given_Yj(vector &amp; Xi, vector &amp; Yj)<br />
{<br />
	return H_Xi_joint_Yj(Xi, Yj) &#8211; H(Yj);<br />
}</p>
<p>//H(Xi|Y) return min{H(Xi|Yj)} for all j<br />
double H_Xi_given_Y(vector &amp; Xi, vector&lt;vector &gt; &amp; Y)<br />
{<br />
	double res = H_Xi_given_Yj(Xi, Y[0]);<br />
	for (size_t i = 1; i &lt; Y.size(); ++i)<br />
	{<br />
		res = min(res, H_Xi_given_Yj(Xi, Y[i]));<br />
	}<br />
	return res;<br />
}</p>
<p>//H(Xi|Y)_norm<br />
double H_Xi_given_Y_norm(vector &amp; Xi, vector&lt;vector &gt; &amp; Y)<br />
{<br />
	return H_Xi_given_Y(Xi, Y) / H(Xi);<br />
}</p>
<p>//H(X|Y) = sum {H(Xi|Y)}<br />
double H_X_given_Y(vector&lt;vector &gt; &amp; X, vector&lt;vector &gt; &amp; Y)<br />
{<br />
	double res = 0;<br />
	for (size_t i = 0; i &lt; X.size(); ++i)<br />
	{<br />
		res += H_Xi_given_Y(X[i], Y);<br />
	}</p>
<p>	return res;<br />
}</p>
<p>//H(X|Y)_norm<br />
double H_X_given_Y_norm(vector&lt;vector &gt; &amp; X, vector&lt;vector &gt; &amp; Y)<br />
{<br />
	double res = 0;<br />
	for (size_t i = 0; i &lt; X.size(); ++i)<br />
	{<br />
		res += H_Xi_given_Y_norm(X[i], Y);<br />
	}</p>
<p>	return res / X.size();<br />
}</p>
<p>//计算NMI<br />
double NMI(vector&lt;vector &gt; &amp; X, vector&lt;vector &gt; &amp; Y)<br />
{<br />
	if (X.size() == 0 || Y.size() == 0)<br />
		return 0;<br />
	g_nodes_num = getNodesNum(X, Y);</p>
<p>	return 1 &#8211; 0.5 * (H_X_given_Y_norm(X, Y) + H_X_given_Y_norm(Y, X));<br />
}</p>
<p>//改进的NMI<br />
//H(X)<br />
double H(vector&lt;vector &gt; &amp; X)<br />
{<br />
	double res = 0;<br />
	for (size_t i = 0; i &lt; X.size(); ++i)<br />
	{<br />
		res += H(X[i]);<br />
	}<br />
	return res;<br />
}</p>
<p>//I(X:Y)<br />
double I(vector&lt;vector &gt; &amp; X, vector&lt;vector &gt; &amp; Y)<br />
{<br />
	return 0.5 * (H(X) + H(Y) &#8211; H_X_given_Y(X, Y) &#8211; H_X_given_Y(Y, X));<br />
}</p>
<p>//计算改进的NMI<br />
double NMI_max(vector&lt;vector &gt; &amp; X, vector&lt;vector &gt; &amp; Y)<br />
{<br />
	return I(X,Y) / max(H(X), H(Y));<br />
}</p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#comment-701"><time datetime="2017-09-25T21:59:19+00:00">2017年9月25日 21:59</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html?replytocom=701#respond' onclick='return addComment.moveForm( "comment-701", "701", "respond", "3108" )' aria-label='回复给常振海'>回复</a>				</span>
				</div>
			</div>
		</div>
	<ul class="children">
	<li class="comment odd alt depth-2" id="li-comment-728">
		<div id="comment-728" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://2.gravatar.com/avatar/?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://2.gravatar.com/avatar/?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo avatar-default' height='64' width='64' />
<noscript><img alt='' src='http://2.gravatar.com/avatar/?s=64&#038;d=identicon&#038;r=g' srcset='http://2.gravatar.com/avatar/?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo avatar-default' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				匿名   				</div>
  				
  				<p>作者为了叙述方便，有一些函数定义被不断的改进。如果直接连到一起就会有重复定义</p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#comment-728"><time datetime="2017-10-18T01:24:41+00:00">2017年10月18日 01:24</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html?replytocom=728#respond' onclick='return addComment.moveForm( "comment-728", "728", "respond", "3108" )' aria-label='回复给'>回复</a>				</span>
				</div>
			</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even depth-2" id="li-comment-729">
		<div id="comment-729" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://1.gravatar.com/avatar/?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://1.gravatar.com/avatar/?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo avatar-default' height='64' width='64' />
<noscript><img alt='' src='http://1.gravatar.com/avatar/?s=64&#038;d=identicon&#038;r=g' srcset='http://1.gravatar.com/avatar/?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo avatar-default' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				匿名   				</div>
  				
  				<p>作者这一篇解读很详细，如果只是想找可以直接用的代码的话，可以看这里 <a href="https://github.com/eXascaleInfolab/OvpNMI" rel="nofollow">https://github.com/eXascaleInfolab/OvpNMI</a></p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html#comment-729"><time datetime="2017-10-18T04:00:27+00:00">2017年10月18日 04:00</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/nmi_normalized_mutual_information_of_overlapping_community_detection.html?replytocom=729#respond' onclick='return addComment.moveForm( "comment-729", "729", "respond", "3108" )' aria-label='回复给'>回复</a>				</span>
				</div>
			</div>
		</div>
	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">我要评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/nmi_normalized_mutual_information_of_overlapping_community_detection.html#respond" style="display:none;">取消回复</a></small></h3>			<form action="http://www.yalewoo.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-form-comment"><textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p>

<script type="text/javascript" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/show_smilies.js"></script>

<div class="ylw_comment_toolbar">
<a class="button-insert-smilies" id="button-insert-smilies" title="插入表情" onClick="show_smilies();"></a>
</div>

<div class="ylw_smilies_box_wrapper">
<div class="ylw_smilies_box" id="ylw_smilies_box">




</div>

</div><div class="comment-name-email-url"><p class="comment-form-author"><label for="author">姓名</label><input id="author" name="author" type="text" value="" size="30" />  </p>
<p class="comment-form-email"><label for="email">邮箱</label><input id="email" name="email" type="text" value="" size="30" /> </p>
<p class="comment-form-url"><label for="url">网址</label><input id="url" name="url" type="text" value="" size="30"  /></p></div><div class='comment_yzm'>验证码*： 8 + 9 = <input type='text' name='sum' class='math_textfield'  required='required' value='' size='25' tabindex='4'><input type='hidden' name='num1' value='8'><input type='hidden' name='num2' value='9'></div><div class="comment-right"><div class="comment-submit-button">
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论" /> <input type='hidden' name='comment_post_ID' value='3108' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p></div><div class="ylw_comment_notifyme"><input type="checkbox" name="comment_mail_notify" id="comment_mail_notify" value="comment_mail_notify" checked="checked" style="margin-left:20px;" /><label for="comment_mail_notify">有人回复时邮件通知我</label></div></div></div><div class="clear"></div>			</form>
			</div><!-- #respond -->
	
</div><!-- .comments-area -->

		</div>  


        
		
			
	</section>
	


	</div>
<footer id="footer">
      Copyright &copy;   <a title="雅乐网" href="http://www.yalewoo.com">雅乐网</a>  /<a title="自豪地采用WordPress" href="https://cn.wordpress.org" target="_blank">WordPress</a> / <a title="YLW3.0主题" href="http://www.yalewoo.com/ylw3.html" target="_blank">YLW3.0</a>  /  <a title="老薛主机" href="https://my.laoxuehost.net/aff.php?aff=2518" target="_blank">老薛主机</a>  /  <a title="七牛云存储" href="https://portal.qiniu.com/signup?code=3li1yeb2ph1ea" target="_black">七牛云存储</a>

      <div id="footer_menu">
      	<div class="menu-%e5%ba%95%e9%83%a8-container"><ul id="menu-%e5%ba%95%e9%83%a8" class="menu"><li id="menu-item-655" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-655"><a target="_blank" href="http://www.yalewoo.com/sitemap.xml">站点地图</a></li>
</ul></div>      </div>
      <div id="cnzztongji">
      	

		<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1252889774'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s5.cnzz.com/stat.php%3Fid%3D1252889774%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>

    

		<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e937132d7f7e86dfb5300ce1ab2c25f7";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



		</div>
</footer>

<script type="text/javascript" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/backtop.js"></script>

<script type='text/javascript' src='http://www.yalewoo.com/wp-includes/js/comment-reply.min.js?ver=4.7.9'></script>



</body>
</html>
<!-- Dynamic page generated in 1.316 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2018-03-18 13:42:25 -->

<!-- Compression = gzip -->
<!-- super cache -->