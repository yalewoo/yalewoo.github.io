<!DOCTYPE html>
<html>
	<head>
		<title>
			linux0.11系统调用，_syscall  |  雅乐网		</title>
		
		<meta charset="UTF-8" />
		<meta name="renderer" content="webkit">
		<link rel="stylesheet" href="http://www.yalewoo.com/wp-content/themes/YLW3_lite/style.css" type="text/css" />
		<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.yalewoo.com/feed" />


				
		
<!-- All in One SEO Pack 2.3.12.1 by Michael Torbert of Semper Fi Web Design[-1,-1] -->
<meta name="description"  content="unistd.h linux0.11 中，include/unistd.h 中定义了72个系统调用号 以及几个宏函数 这4个 syscall 函数可以用来展开成为系统调用函数，后面的数字表示函数有几个参数。它的形式参数 type 函数返回类型 name 函数名 aty" />

<link rel="canonical" href="http://www.yalewoo.com/linux0_11_syscall.html" />
<!-- /all in one seo pack -->
<link rel="alternate" type="application/rss+xml" title="雅乐网 &raquo; linux0.11系统调用，_syscall评论Feed" href="http://www.yalewoo.com/linux0_11_syscall.html/feed" />
<link rel='stylesheet' id='crayon-css'  href='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-consolas-css'  href='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/fonts/consolas.css?ver=_2.7.2_beta' type='text/css' media='all' />
<script type='text/javascript' src='https://lib.sinaapp.com/js/jquery/1.8.2/jquery.min.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/www.yalewoo.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.yalewoo.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta'></script>
<link rel='prev' title='Linux0.11操作系统启动bootsect.s, setup.s, head.s, main.c' href='http://www.yalewoo.com/linux0-11_bootsect-s-setup-s_head-s.html' />
<link rel='next' title='Qt编译错误error: No rule to make target uic.exe, needed by &#8216;ui_widget.h&#8217;.  Stop.' href='http://www.yalewoo.com/qt-1-error-no-rule-to-make-target-cqtqt5-8-05-8mingw53_32binuic-exe-needed-by-ui_widget-h-stop.html' />
<link rel='shortlink' href='http://www.yalewoo.com/?p=3361' />
<link rel="stylesheet" href="http://www.yalewoo.com/wp-content/plugins/wp-content-index/style.css" type="text/css" media="all" />

<!-- Start Of Script Generated By WP-PostViews -->
<script type="text/javascript">
/* <![CDATA[ */
jQuery.ajax({type:'GET',url:'http://www.yalewoo.com/wp-admin/admin-ajax.php',data:'postviews_id=3361&action=postviews',cache:false});/* ]]> */

					jQuery(document).ready(function() {
    var ajax_data = {
        action: "show_postview",
        postviews_id: 3361
    };
    $.post("http://www.yalewoo.com/wp-admin/admin-ajax.php", ajax_data,
    function(data) {
        $('.meta-view').html(data);
    });
    return false;
});					
					</script>
<!-- End Of Script Generated By WP-PostViews -->

		<script src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/jquery.lazyload.min.js" type="text/javascript"></script>
		<script type="text/javascript">
		    $(function() {
		        $("#secondary img").lazyload({
		            effect:"fadeIn"
		          });
		        });
		    $(function() {
		        $("img").lazyload({
		            effect:"fadeIn"
		          });
		        });
		</script>

<!--[if lte IE 8]><script>document.write("<p style=\"color:red;font-size:40px;\">你正在使用 Internet Explorer 的过期版本（IE6、IE7、IE8）<br/>请<a href=\"#\" style=\"color:blue;\">升级您的浏览器</a>获得更好的浏览体验。</p>");</script><![endif]-->
	
	</head><body>
<header id="topheader">
	<hgroup>
		<h1><a href = "http://www.yalewoo.com">雅乐网</a>
		</h1>
		<h2>计算机技术博客</h2>
	</hgroup>

	<div id="top_menu">
		<div class="menu-%e6%9c%80%e9%a1%b6%e7%ab%af-container"><ul id="menu-%e6%9c%80%e9%a1%b6%e7%ab%af" class="menu"><li id="menu-item-663" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-663"><a href="http://www.yalewoo.com/about">关于本站</a></li>
<li id="menu-item-662" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-662"><a href="http://www.yalewoo.com/updates">雅乐网更新记录</a></li>
<li id="menu-item-661" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-661"><a target="_blank" href="http://www.yalewoo.com/old0/">老版网站</a></li>
</ul></div>		<form method="get" id="searchform" action="http://www.yalewoo.com/">



<div>



	<input type="text" value="" name="s" id="s" size="15" />



	<input type="submit" id="searchsubmit" value="Search" />



</div>



</form>	</div>
	
	
</header>
<nav class="main_nav">
	<div class="menu-%e4%b8%bb%e8%8f%9c%e5%8d%9520171106-container"><ul id="menu-%e4%b8%bb%e8%8f%9c%e5%8d%9520171106" class="menu"><li id="menu-item-3235" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-3235"><a href="http://www.yalewoo.com/">首页</a></li>
<li id="menu-item-3237" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-3237"><a href="http://www.yalewoo.com/programming">编程</a>
<ul class="sub-menu">
	<li id="menu-item-3238" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3238"><a href="http://www.yalewoo.com/programming/c_cpp">C/C++</a></li>
	<li id="menu-item-3243" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3243"><a href="http://www.yalewoo.com/programming/data_structure">数据结构</a></li>
	<li id="menu-item-3244" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3244"><a href="http://www.yalewoo.com/programming/basic_algorithm">算法</a></li>
	<li id="menu-item-3240" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3240"><a href="http://www.yalewoo.com/programming/online_judge">OJ刷题</a></li>
	<li id="menu-item-3239" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3239"><a href="http://www.yalewoo.com/programming/linux">Linux</a></li>
	<li id="menu-item-3241" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3241"><a href="http://www.yalewoo.com/programming/web">Web</a>
	<ul class="sub-menu">
		<li id="menu-item-3242" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3242"><a href="http://www.yalewoo.com/programming/web/wordpress">wordpress</a></li>
	</ul>
</li>
</ul>
</li>
<li id="menu-item-3245" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3245"><a href="http://www.yalewoo.com/algorithm">算法</a>
<ul class="sub-menu">
	<li id="menu-item-3248" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3248"><a href="http://www.yalewoo.com/algorithm/maths">数学</a></li>
	<li id="menu-item-3246" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3246"><a href="http://www.yalewoo.com/algorithm/ml_notes">机器学习</a></li>
	<li id="menu-item-3281" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3281"><a href="http://www.yalewoo.com/algorithm/deep_learning">深度学习</a></li>
	<li id="menu-item-3247" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3247"><a href="http://www.yalewoo.com/algorithm/python">python</a></li>
	<li id="menu-item-3253" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3253"><a href="http://www.yalewoo.com/algorithm/%e7%a4%be%e5%9b%a2%e6%a3%80%e6%b5%8b">社团检测</a></li>
</ul>
</li>
<li id="menu-item-3254" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3254"><a href="http://www.yalewoo.com/tools">工具教程</a>
<ul class="sub-menu">
	<li id="menu-item-3255" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3255"><a href="http://www.yalewoo.com/tools/git">Git/GitHub</a></li>
	<li id="menu-item-3256" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3256"><a href="http://www.yalewoo.com/tools/sublime_text">Sublime Text</a></li>
	<li id="menu-item-3257" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3257"><a href="http://www.yalewoo.com/tools/vs2013">VS2013</a></li>
	<li id="menu-item-3259" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3259"><a href="http://www.yalewoo.com/tools/browser">浏览器</a></li>
	<li id="menu-item-3258" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3258"><a href="http://www.yalewoo.com/tools/other_tools">其他工具</a></li>
</ul>
</li>
<li id="menu-item-3260" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3260"><a href="http://www.yalewoo.com/excellent_softwares">软件推荐</a>
<ul class="sub-menu">
	<li id="menu-item-3261" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3261"><a href="http://www.yalewoo.com/excellent_softwares/zip">压缩加密</a></li>
	<li id="menu-item-3262" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3262"><a href="http://www.yalewoo.com/excellent_softwares/pictools">图片工具</a></li>
	<li id="menu-item-3263" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3263"><a href="http://www.yalewoo.com/excellent_softwares/media_tools">多媒体</a></li>
	<li id="menu-item-3264" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3264"><a href="http://www.yalewoo.com/excellent_softwares/safe_software">安全清理</a></li>
	<li id="menu-item-3265" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3265"><a href="http://www.yalewoo.com/excellent_softwares/android">安卓</a></li>
	<li id="menu-item-3266" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3266"><a href="http://www.yalewoo.com/excellent_softwares/utility">实用工具</a></li>
	<li id="menu-item-3267" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3267"><a href="http://www.yalewoo.com/excellent_softwares/search_tools">搜索词典</a></li>
	<li id="menu-item-3268" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3268"><a href="http://www.yalewoo.com/excellent_softwares/efficiency_tools">效率提升</a></li>
	<li id="menu-item-3269" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3269"><a href="http://www.yalewoo.com/excellent_softwares/programming_tools">编程开发</a></li>
	<li id="menu-item-3270" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3270"><a href="http://www.yalewoo.com/excellent_softwares/internet_software">网络软件</a></li>
	<li id="menu-item-3271" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3271"><a href="http://www.yalewoo.com/excellent_softwares/edit_and_reading">阅读编辑</a></li>
</ul>
</li>
<li id="menu-item-3272" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3272"><a href="http://www.yalewoo.com/it_resource">资源</a>
<ul class="sub-menu">
	<li id="menu-item-3273" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3273"><a href="http://www.yalewoo.com/it_resource/good_websites">好网站</a></li>
	<li id="menu-item-3274" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3274"><a href="http://www.yalewoo.com/it_resource/stuff">好资料</a></li>
	<li id="menu-item-3275" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3275"><a href="http://www.yalewoo.com/it_resource/how">授人以渔</a></li>
	<li id="menu-item-3276" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3276"><a href="http://www.yalewoo.com/it_resource/ebooks-share">电子书</a></li>
</ul>
</li>
<li id="menu-item-3277" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3277"><a href="http://www.yalewoo.com/learning">我爱学习</a>
<ul class="sub-menu">
	<li id="menu-item-3278" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3278"><a href="http://www.yalewoo.com/learning/popular_science">科普</a></li>
</ul>
</li>
<li id="menu-item-3280" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3280"><a href="http://www.yalewoo.com/about">关于本站</a></li>
</ul></div></nav>
<script type="text/javascript" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/dianzan.js"></script>


<div id="mbxdh">
		<div>
			
			<a href="http://www.yalewoo.com/programming">编程</a> &raquo; <a href="http://www.yalewoo.com/programming/linux">Linux</a> &raquo; linux0.11系统调用，_syscall		</div>
</div>
<div id="container">

		<section class="whole_article" id="article-3361">
		<article class="post-3361 post type-post status-publish format-standard hentry category-linux tag-linux" id="entry">
			<h2 id="article-title">

								<span class = "title-meta-yuanchuang title-meta-ico"></span>
				
				<a href="http://www.yalewoo.com/linux0_11_syscall.html" title="linux0.11系统调用，_syscall">linux0.11系统调用，_syscall</a>

				


				

			</h2>
			

            <div class="post-meta">

                <span class="meta-author meta-ico"><a href="http://www.yalewoo.com/author/yalewoo" title="由yalewoo发布" rel="author">yalewoo</a> </span>
            	                <span class="meta-time meta-ico"> 最后修改于 2017-12-21</span>
             	发表于 2017-12-21
                
                
                
                
                <span class="meta-view meta-ico">29</span>
                <span class="meta-comment meta-ico"><a href="http://www.yalewoo.com/linux0_11_syscall.html#comments">2</a></span>

                <br><br>

                <span class="meta-category meta-ico">      <a href="http://www.yalewoo.com/programming/linux" rel="category tag">Linux</a> </span>
                <span class="meta-category meta-ico">       <a href="http://www.yalewoo.com/tag/linux" rel="tag">linux</a> </span>

                

                
			</div>
			
			
            <div id="article-content">
				<div id="content-index" class="content-index" style="margin:0 0 10px 10px;float:right;"><span class="content-index-toctoggle">[<a id="content-index-togglelink" href="javascript:content_index_toggleToc()">目录开关</a>]</span>
<script type="text/javascript" language="javascript">
window.content_index_showTocToggle=true;function content_index_toggleToc(){var tts="显示目录";var tth="隐藏目录";if(window.content_index_showTocToggle){window.content_index_showTocToggle=false;document.getElementById("content-index-contents").style.display="block";document.getElementById("content-index-togglelink").innerHTML=tth}else{window.content_index_showTocToggle=true;document.getElementById("content-index-contents").style.display="none";document.getElementById("content-index-togglelink").innerHTML=tts}}
</script>
<ul id="content-index-contents"><li class="content-index-level-1"><a href="http://www.yalewoo.com/linux0_11_syscall.html#unistd.h" title="unistd.h"><em>1</em><span>unistd.h</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/linux0_11_syscall.html#使用syscall" title="使用syscall"><em>2</em><span>使用syscall</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/linux0_11_syscall.html#int 0x80" title="int 0x80"><em>3</em><span>int 0x80</span></a></li><li class="content-index-level-1"><a href="http://www.yalewoo.com/linux0_11_syscall.html#system_call" title="system_call"><em>4</em><span>system_call</span></a></li></ul></div>
<h3 id="unistd.h">unistd.h</h3>
<p>linux0.11 中，include/unistd.h 中定义了72个系统调用号</p>
		<div id="crayon-5aa8b63c2ffdc137491439" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
#ifdef __LIBRARY__

#define __NR_setup	0	/* used only by init, to get system going */
#define __NR_exit	1
#define __NR_fork	2
#define __NR_read	3
#define __NR_write	4
#define __NR_open	5
#define __NR_close	6
#define __NR_waitpid	7
#define __NR_creat	8
#define __NR_link	9
#define __NR_unlink	10
#define __NR_execve	11
#define __NR_chdir	12
#define __NR_time	13
#define __NR_mknod	14
#define __NR_chmod	15
#define __NR_chown	16
#define __NR_break	17
#define __NR_stat	18
#define __NR_lseek	19
#define __NR_getpid	20
#define __NR_mount	21
#define __NR_umount	22
#define __NR_setuid	23
#define __NR_getuid	24
#define __NR_stime	25
#define __NR_ptrace	26
#define __NR_alarm	27
#define __NR_fstat	28
#define __NR_pause	29
#define __NR_utime	30
#define __NR_stty	31
#define __NR_gtty	32
#define __NR_access	33
#define __NR_nice	34
#define __NR_ftime	35
#define __NR_sync	36
#define __NR_kill	37
#define __NR_rename	38
#define __NR_mkdir	39
#define __NR_rmdir	40
#define __NR_dup	41
#define __NR_pipe	42
#define __NR_times	43
#define __NR_prof	44
#define __NR_brk	45
#define __NR_setgid	46
#define __NR_getgid	47
#define __NR_signal	48
#define __NR_geteuid	49
#define __NR_getegid	50
#define __NR_acct	51
#define __NR_phys	52
#define __NR_lock	53
#define __NR_ioctl	54
#define __NR_fcntl	55
#define __NR_mpx	56
#define __NR_setpgid	57
#define __NR_ulimit	58
#define __NR_uname	59
#define __NR_umask	60
#define __NR_chroot	61
#define __NR_ustat	62
#define __NR_dup2	63
#define __NR_getppid	64
#define __NR_getpgrp	65
#define __NR_setsid	66
#define __NR_sigaction	67
#define __NR_sgetmask	68
#define __NR_ssetmask	69
#define __NR_setreuid	70
#define __NR_setregid	71</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-1">1</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-2">2</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-3">3</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-4">4</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-5">5</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-6">6</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-7">7</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-8">8</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-9">9</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-10">10</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-11">11</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-12">12</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-13">13</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-14">14</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-15">15</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-16">16</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-17">17</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-18">18</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-19">19</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-20">20</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-21">21</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-22">22</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-23">23</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-24">24</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-25">25</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-26">26</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-27">27</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-28">28</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-29">29</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-30">30</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-31">31</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-32">32</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-33">33</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-34">34</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-35">35</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-36">36</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-37">37</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-38">38</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-39">39</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-40">40</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-41">41</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-42">42</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-43">43</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-44">44</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-45">45</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-46">46</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-47">47</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-48">48</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-49">49</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-50">50</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-51">51</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-52">52</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-53">53</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-54">54</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-55">55</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-56">56</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-57">57</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-58">58</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-59">59</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-60">60</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-61">61</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-62">62</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-63">63</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-64">64</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-65">65</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-66">66</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-67">67</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-68">68</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-69">69</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-70">70</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-71">71</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-72">72</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-73">73</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffdc137491439-74">74</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-1"><span class="crayon-p">#ifdef __LIBRARY__</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-2">&nbsp;</div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-3"><span class="crayon-p">#define __NR_setup	0	/* used only by init, to get system going */</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-4"><span class="crayon-p">#define __NR_exit	1</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-5"><span class="crayon-p">#define __NR_fork	2</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-6"><span class="crayon-p">#define __NR_read	3</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-7"><span class="crayon-p">#define __NR_write	4</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-8"><span class="crayon-p">#define __NR_open	5</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-9"><span class="crayon-p">#define __NR_close	6</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-10"><span class="crayon-p">#define __NR_waitpid	7</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-11"><span class="crayon-p">#define __NR_creat	8</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-12"><span class="crayon-p">#define __NR_link	9</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-13"><span class="crayon-p">#define __NR_unlink	10</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-14"><span class="crayon-p">#define __NR_execve	11</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-15"><span class="crayon-p">#define __NR_chdir	12</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-16"><span class="crayon-p">#define __NR_time	13</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-17"><span class="crayon-p">#define __NR_mknod	14</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-18"><span class="crayon-p">#define __NR_chmod	15</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-19"><span class="crayon-p">#define __NR_chown	16</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-20"><span class="crayon-p">#define __NR_break	17</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-21"><span class="crayon-p">#define __NR_stat	18</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-22"><span class="crayon-p">#define __NR_lseek	19</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-23"><span class="crayon-p">#define __NR_getpid	20</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-24"><span class="crayon-p">#define __NR_mount	21</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-25"><span class="crayon-p">#define __NR_umount	22</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-26"><span class="crayon-p">#define __NR_setuid	23</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-27"><span class="crayon-p">#define __NR_getuid	24</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-28"><span class="crayon-p">#define __NR_stime	25</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-29"><span class="crayon-p">#define __NR_ptrace	26</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-30"><span class="crayon-p">#define __NR_alarm	27</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-31"><span class="crayon-p">#define __NR_fstat	28</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-32"><span class="crayon-p">#define __NR_pause	29</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-33"><span class="crayon-p">#define __NR_utime	30</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-34"><span class="crayon-p">#define __NR_stty	31</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-35"><span class="crayon-p">#define __NR_gtty	32</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-36"><span class="crayon-p">#define __NR_access	33</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-37"><span class="crayon-p">#define __NR_nice	34</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-38"><span class="crayon-p">#define __NR_ftime	35</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-39"><span class="crayon-p">#define __NR_sync	36</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-40"><span class="crayon-p">#define __NR_kill	37</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-41"><span class="crayon-p">#define __NR_rename	38</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-42"><span class="crayon-p">#define __NR_mkdir	39</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-43"><span class="crayon-p">#define __NR_rmdir	40</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-44"><span class="crayon-p">#define __NR_dup	41</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-45"><span class="crayon-p">#define __NR_pipe	42</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-46"><span class="crayon-p">#define __NR_times	43</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-47"><span class="crayon-p">#define __NR_prof	44</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-48"><span class="crayon-p">#define __NR_brk	45</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-49"><span class="crayon-p">#define __NR_setgid	46</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-50"><span class="crayon-p">#define __NR_getgid	47</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-51"><span class="crayon-p">#define __NR_signal	48</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-52"><span class="crayon-p">#define __NR_geteuid	49</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-53"><span class="crayon-p">#define __NR_getegid	50</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-54"><span class="crayon-p">#define __NR_acct	51</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-55"><span class="crayon-p">#define __NR_phys	52</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-56"><span class="crayon-p">#define __NR_lock	53</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-57"><span class="crayon-p">#define __NR_ioctl	54</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-58"><span class="crayon-p">#define __NR_fcntl	55</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-59"><span class="crayon-p">#define __NR_mpx	56</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-60"><span class="crayon-p">#define __NR_setpgid	57</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-61"><span class="crayon-p">#define __NR_ulimit	58</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-62"><span class="crayon-p">#define __NR_uname	59</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-63"><span class="crayon-p">#define __NR_umask	60</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-64"><span class="crayon-p">#define __NR_chroot	61</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-65"><span class="crayon-p">#define __NR_ustat	62</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-66"><span class="crayon-p">#define __NR_dup2	63</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-67"><span class="crayon-p">#define __NR_getppid	64</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-68"><span class="crayon-p">#define __NR_getpgrp	65</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-69"><span class="crayon-p">#define __NR_setsid	66</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-70"><span class="crayon-p">#define __NR_sigaction	67</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-71"><span class="crayon-p">#define __NR_sgetmask	68</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-72"><span class="crayon-p">#define __NR_ssetmask	69</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-73"><span class="crayon-p">#define __NR_setreuid	70</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffdc137491439-74"><span class="crayon-p">#define __NR_setregid	71</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>以及几个宏函数</p>
		<div id="crayon-5aa8b63c2ffed975012659" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
#define _syscall0(type,name) \
type name(void) \
{ \
long __res; \
__asm__ volatile ("int $0x80" \
	: "=a" (__res) \
	: "0" (__NR_##name)); \
if (__res &gt;= 0) \
	return (type) __res; \
errno = -__res; \
return -1; \
}

#define _syscall1(type,name,atype,a) \
type name(atype a) \
{ \
long __res; \
__asm__ volatile ("int $0x80" \
	: "=a" (__res) \
	: "0" (__NR_##name),"b" ((long)(a))); \
if (__res &gt;= 0) \
	return (type) __res; \
errno = -__res; \
return -1; \
}

#define _syscall2(type,name,atype,a,btype,b) \
type name(atype a,btype b) \
{ \
long __res; \
__asm__ volatile ("int $0x80" \
	: "=a" (__res) \
	: "0" (__NR_##name),"b" ((long)(a)),"c" ((long)(b))); \
if (__res &gt;= 0) \
	return (type) __res; \
errno = -__res; \
return -1; \
}

#define _syscall3(type,name,atype,a,btype,b,ctype,c) \
type name(atype a,btype b,ctype c) \
{ \
long __res; \
__asm__ volatile ("int $0x80" \
	: "=a" (__res) \
	: "0" (__NR_##name),"b" ((long)(a)),"c" ((long)(b)),"d" ((long)(c))); \
if (__res&gt;=0) \
	return (type) __res; \
errno=-__res; \
return -1; \
}

#endif /* __LIBRARY__ */</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-1">1</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-2">2</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-3">3</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-4">4</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-5">5</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-6">6</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-7">7</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-8">8</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-9">9</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-10">10</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-11">11</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-12">12</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-13">13</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-14">14</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-15">15</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-16">16</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-17">17</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-18">18</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-19">19</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-20">20</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-21">21</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-22">22</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-23">23</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-24">24</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-25">25</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-26">26</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-27">27</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-28">28</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-29">29</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-30">30</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-31">31</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-32">32</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-33">33</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-34">34</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-35">35</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-36">36</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-37">37</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-38">38</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-39">39</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-40">40</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-41">41</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-42">42</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-43">43</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-44">44</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-45">45</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-46">46</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-47">47</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-48">48</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-49">49</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-50">50</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-51">51</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-52">52</div><div class="crayon-num" data-line="crayon-5aa8b63c2ffed975012659-53">53</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-1"><span class="crayon-p">#define _syscall0(type,name) \</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-2"><span class="crayon-e">type </span><span class="crayon-e">name</span><span class="crayon-sy">(</span><span class="crayon-t">void</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-3"><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-4"><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-5"><span class="crayon-r">__asm__</span><span class="crayon-h"> </span><span class="crayon-m">volatile</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">"int $0x80"</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-6"><span class="crayon-h">	</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"=a"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-7"><span class="crayon-h">	</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__NR_</span><span class="crayon-p">##name)); \</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-8"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__res</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-9"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">type</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-10"><span class="crayon-v">errno</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-11"><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-12"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-13">&nbsp;</div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-14"><span class="crayon-p">#define _syscall1(type,name,atype,a) \</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-15"><span class="crayon-e">type </span><span class="crayon-e">name</span><span class="crayon-sy">(</span><span class="crayon-i">atype</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-16"><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-17"><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-18"><span class="crayon-r">__asm__</span><span class="crayon-h"> </span><span class="crayon-m">volatile</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">"int $0x80"</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-19"><span class="crayon-h">	</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"=a"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-20"><span class="crayon-h">	</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__NR_</span><span class="crayon-p">##name),"b" ((long)(a))); \</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-21"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__res</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-22"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">type</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-23"><span class="crayon-v">errno</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-24"><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-25"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-26">&nbsp;</div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-27"><span class="crayon-p">#define _syscall2(type,name,atype,a,btype,b) \</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-28"><span class="crayon-e">type </span><span class="crayon-e">name</span><span class="crayon-sy">(</span><span class="crayon-i">atype</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">,</span><span class="crayon-i">btype</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-29"><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-30"><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-31"><span class="crayon-r">__asm__</span><span class="crayon-h"> </span><span class="crayon-m">volatile</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">"int $0x80"</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-32"><span class="crayon-h">	</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"=a"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-33"><span class="crayon-h">	</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__NR_</span><span class="crayon-p">##name),"b" ((long)(a)),"c" ((long)(b))); \</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-34"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__res</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-35"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">type</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-36"><span class="crayon-v">errno</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-37"><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-38"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-39">&nbsp;</div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-40"><span class="crayon-p">#define _syscall3(type,name,atype,a,btype,b,ctype,c) \</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-41"><span class="crayon-e">type </span><span class="crayon-e">name</span><span class="crayon-sy">(</span><span class="crayon-i">atype</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">,</span><span class="crayon-i">btype</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">,</span><span class="crayon-i">ctype</span><span class="crayon-h"> </span><span class="crayon-v">c</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-42"><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-43"><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-44"><span class="crayon-r">__asm__</span><span class="crayon-h"> </span><span class="crayon-m">volatile</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">"int $0x80"</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-45"><span class="crayon-h">	</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"=a"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-46"><span class="crayon-h">	</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__NR_</span><span class="crayon-p">##name),"b" ((long)(a)),"c" ((long)(b)),"d" ((long)(c))); \</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-47"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__res</span><span class="crayon-o">&gt;=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-48"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">type</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-49"><span class="crayon-v">errno</span><span class="crayon-o">=</span><span class="crayon-o">-</span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-50"><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-51"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-52">&nbsp;</div><div class="crayon-line" id="crayon-5aa8b63c2ffed975012659-53"><span class="crayon-p">#endif /* __LIBRARY__ */</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>这4个 syscall 函数可以用来展开成为系统调用函数，后面的数字表示函数有几个参数。它的形式参数</p>
<table>
<tbody>
<tr>
<td>type</td>
<td>函数返回类型</td>
</tr>
<tr>
<td>name</td>
<td>函数名</td>
</tr>
<tr>
<td>atype</td>
<td>第一个参数类型</td>
</tr>
<tr>
<td>a</td>
<td>第一个参数</td>
</tr>
<tr>
<td>btype</td>
<td>第二个参数类型</td>
</tr>
<tr>
<td>b</td>
<td>第二个参数</td>
</tr>
<tr>
<td>ctype</td>
<td>第三个参数类型</td>
</tr>
<tr>
<td>c</td>
<td>第三个参数</td>
</tr>
</tbody>
</table>
<h3 id="使用syscall">使用syscall</h3>
<p>以write为例, 在unistd.h中，write函数声明如下：</p>
		<div id="crayon-5aa8b63c2fff6549666531" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
int write(int fd, const char * buf, off_t count);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c2fff6549666531-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c2fff6549666531-1"><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">fd</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">const</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">buf</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">off_t </span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>只要按照syscall的参数格式填上去</p>
<table>
<tbody>
<tr>
<td>type</td>
<td>函数返回类型</td>
<td>int</td>
</tr>
<tr>
<td>name</td>
<td>函数名</td>
<td>write</td>
</tr>
<tr>
<td>atype</td>
<td>第一个参数类型</td>
<td>int</td>
</tr>
<tr>
<td>a</td>
<td>第一个参数</td>
<td>fd</td>
</tr>
<tr>
<td>btype</td>
<td>第二个参数类型</td>
<td>const char *</td>
</tr>
<tr>
<td>b</td>
<td>第二个参数</td>
<td>buf</td>
</tr>
<tr>
<td>ctype</td>
<td>第三个参数类型</td>
<td>off_t</td>
</tr>
<tr>
<td>c</td>
<td>第三个参数</td>
<td>count</td>
</tr>
</tbody>
</table>
<p>lib/write.c 中是他的实现</p>
		<div id="crayon-5aa8b63c2fffd495212491" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
#define __LIBRARY__
#include &lt;unistd.h&gt;

_syscall3(int,write,int,fd,const char *,buf,off_t,count)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c2fffd495212491-1">1</div><div class="crayon-num" data-line="crayon-5aa8b63c2fffd495212491-2">2</div><div class="crayon-num" data-line="crayon-5aa8b63c2fffd495212491-3">3</div><div class="crayon-num" data-line="crayon-5aa8b63c2fffd495212491-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c2fffd495212491-1"><span class="crayon-p">#define __LIBRARY__</span></div><div class="crayon-line" id="crayon-5aa8b63c2fffd495212491-2"><span class="crayon-p">#include &lt;unistd.h&gt;</span></div><div class="crayon-line" id="crayon-5aa8b63c2fffd495212491-3">&nbsp;</div><div class="crayon-line" id="crayon-5aa8b63c2fffd495212491-4"><span class="crayon-e">_syscall3</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">,</span><span class="crayon-v">write</span><span class="crayon-sy">,</span><span class="crayon-t">int</span><span class="crayon-sy">,</span><span class="crayon-v">fd</span><span class="crayon-sy">,</span><span class="crayon-r">const</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-sy">,</span><span class="crayon-v">buf</span><span class="crayon-sy">,</span><span class="crayon-v">off_t</span><span class="crayon-sy">,</span><span class="crayon-v">count</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>展开后就变成了（为了展示清除额外手动添加了换行）</p>
		<div id="crayon-5aa8b63c30002176946752" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
int write(int fd,const char * buf,off_t count)
{ long __res; 
  __asm__ volatile ("int $0x80" 
    : "=a" (__res) 
    : "0" (__NR_write),"b" ((long)(fd)),"c" ((long)(buf)),"d" ((long)(count))
    ); 
  if (__res&gt;=0)
   return (int) __res; 
  errno=-__res; 
  return -1;
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-1">1</div><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-2">2</div><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-3">3</div><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-4">4</div><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-5">5</div><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-6">6</div><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-7">7</div><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-8">8</div><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-9">9</div><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-10">10</div><div class="crayon-num" data-line="crayon-5aa8b63c30002176946752-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c30002176946752-1"><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">fd</span><span class="crayon-sy">,</span><span class="crayon-r">const</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">buf</span><span class="crayon-sy">,</span><span class="crayon-e">off_t </span><span class="crayon-v">count</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aa8b63c30002176946752-2"><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5aa8b63c30002176946752-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">__asm__</span><span class="crayon-h"> </span><span class="crayon-m">volatile</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">"int $0x80"</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5aa8b63c30002176946752-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"=a"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5aa8b63c30002176946752-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"0"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__NR_write</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">"b"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-t">long</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">fd</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">"c"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-t">long</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">buf</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">"d"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-t">long</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aa8b63c30002176946752-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5aa8b63c30002176946752-7"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">__res</span><span class="crayon-o">&gt;=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aa8b63c30002176946752-8"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5aa8b63c30002176946752-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">errno</span><span class="crayon-o">=</span><span class="crayon-o">-</span><span class="crayon-v">__res</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5aa8b63c30002176946752-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aa8b63c30002176946752-11"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>这是一个内嵌汇编，通过int 0x80 中断来实现系统调用。</p>
<p>第一个冒号后面是输出，输出的寄存器前面要有等号，&#8221;=a&#8221; 表示 输出存放在 eax 寄存器中，最终汇编结束时会赋值给 变量 __res</p>
<p>第二个冒号后面是输入，把输出和输入用到的寄存器按顺序编号（从输出寄存器开始从左到右，再从输入寄存器从左到右），&#8221;0&#8243; 表示的是第一个寄存器，也就是输出用的eax，它的值被赋值为__NR_write， 也就是系统调用号。后面&#8221;b&#8221;, &#8220;c&#8221;, &#8220;d&#8221;表示寄存器ebx，ecx和edx，用来存放write的三个参数。可以用的寄存器符号表示表：</p>
<table>
<tbody>
<tr>
<td>符号</td>
<td>表示</td>
<td>符号</td>
<td>表示</td>
</tr>
<tr>
<td>a</td>
<td>eax</td>
<td>m</td>
<td>使用内存地址</td>
</tr>
<tr>
<td>b</td>
<td>ebx</td>
<td>o</td>
<td>使用内存地址可以加偏移</td>
</tr>
<tr>
<td>c</td>
<td>ecx</td>
<td>I</td>
<td>使用常数0-31</td>
</tr>
<tr>
<td>d</td>
<td>edx</td>
<td>J</td>
<td>使用常数0-63</td>
</tr>
<tr>
<td>S</td>
<td>esi</td>
<td>K</td>
<td>使用常数0-255</td>
</tr>
<tr>
<td>D</td>
<td>edi</td>
<td>L</td>
<td>使用常数0-65535</td>
</tr>
<tr>
<td>q</td>
<td>动态分配可寻址寄存器</p>
<p>eax, ebx, ecx, edx</td>
<td>M</td>
<td>使用常数0-3</td>
</tr>
<tr>
<td>r</td>
<td>使用任意动态分配的寄存器</td>
<td>N</td>
<td>使用1字节常数0-255</td>
</tr>
<tr>
<td>g</td>
<td>使用通用有效地址、</p>
<p>（可寻址寄存器或内存地址）</td>
<td>O</td>
<td>使用常数0-31</td>
</tr>
<tr>
<td>A</td>
<td>eax与edx联合（64位）</td>
<td>=</td>
<td>输出操作数</td>
</tr>
<tr>
<td>+</td>
<td>操作数可读可写</td>
<td>&amp;</td>
<td>早期会变的操作数，表示使用完操作数之前，内容会被修改</td>
</tr>
</tbody>
</table>
<h3 id="int 0x80">int 0x80</h3>
<p>在初始化的main函数中的sched_init中，有下面的代码</p>
		<div id="crayon-5aa8b63c3000b531735081" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
void sched_init(void)
{
	...
	set_system_gate(0x80,&amp;system_call);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c3000b531735081-1">1</div><div class="crayon-num" data-line="crayon-5aa8b63c3000b531735081-2">2</div><div class="crayon-num" data-line="crayon-5aa8b63c3000b531735081-3">3</div><div class="crayon-num" data-line="crayon-5aa8b63c3000b531735081-4">4</div><div class="crayon-num" data-line="crayon-5aa8b63c3000b531735081-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c3000b531735081-1"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">sched_init</span><span class="crayon-sy">(</span><span class="crayon-t">void</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aa8b63c3000b531735081-2"><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5aa8b63c3000b531735081-3"><span class="crayon-h">	</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5aa8b63c3000b531735081-4"><span class="crayon-h">	</span><span class="crayon-e">set_system_gate</span><span class="crayon-sy">(</span><span class="crayon-cn">0x80</span><span class="crayon-sy">,</span><span class="crayon-o">&amp;</span><span class="crayon-v">system_call</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5aa8b63c3000b531735081-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>这句话设置IDT表，将0x80中断号和system_call函数进行绑定，调用int 0x80时，就会执行system_call函数。</p>
<p>include/asm/system.h</p>
		<div id="crayon-5aa8b63c30011981204346" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
#define set_system_gate(n,addr) \
	_set_gate(&amp;idt[n],15,3,addr)

#define _set_gate(gate_addr,type,dpl,addr) \
__asm__ ("movw %%dx,%%ax\n\t" \
	"movw %0,%%dx\n\t" \
	"movl %%eax,%1\n\t" \
	"movl %%edx,%2" \
	: \
	: "i" ((short) (0x8000+(dpl&lt;&lt;13)+(type&lt;&lt;8))), \
	"o" (*((char *) (gate_addr))), \
	"o" (*(4+(char *) (gate_addr))), \
	"d" ((char *) (addr)),"a" (0x00080000))</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-1">1</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-2">2</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-3">3</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-4">4</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-5">5</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-6">6</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-7">7</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-8">8</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-9">9</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-10">10</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-11">11</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-12">12</div><div class="crayon-num" data-line="crayon-5aa8b63c30011981204346-13">13</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c30011981204346-1"><span class="crayon-p">#define set_system_gate(n,addr) \</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-2"><span class="crayon-h">	</span><span class="crayon-e">_set_gate</span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-v">idt</span><span class="crayon-sy">[</span><span class="crayon-v">n</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-cn">15</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-sy">,</span><span class="crayon-v">addr</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-3">&nbsp;</div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-4"><span class="crayon-p">#define _set_gate(gate_addr,type,dpl,addr) \</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-5"><span class="crayon-r">__asm__</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">"movw %%dx,%%ax\n\t"</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-6"><span class="crayon-h">	</span><span class="crayon-s">"movw %0,%%dx\n\t"</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-7"><span class="crayon-h">	</span><span class="crayon-s">"movl %%eax,%1\n\t"</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-8"><span class="crayon-h">	</span><span class="crayon-s">"movl %%edx,%2"</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-9"><span class="crayon-h">	</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-10"><span class="crayon-h">	</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"i"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-t">short</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0x8000</span><span class="crayon-o">+</span><span class="crayon-sy">(</span><span class="crayon-v">dpl</span><span class="crayon-o">&lt;&lt;</span><span class="crayon-cn">13</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-sy">(</span><span class="crayon-v">type</span><span class="crayon-o">&lt;&lt;</span><span class="crayon-cn">8</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-11"><span class="crayon-h">	</span><span class="crayon-s">"o"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">*</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">gate_addr</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-12"><span class="crayon-h">	</span><span class="crayon-s">"o"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">*</span><span class="crayon-sy">(</span><span class="crayon-cn">4</span><span class="crayon-o">+</span><span class="crayon-sy">(</span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">gate_addr</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">\</span></div><div class="crayon-line" id="crayon-5aa8b63c30011981204346-13"><span class="crayon-h">	</span><span class="crayon-s">"d"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">addr</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">"a"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0x00080000</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>因此这个语句</p>
		<div id="crayon-5aa8b63c30017864578082" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
set_system_gate(0x80,&amp;system_call);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c30017864578082-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c30017864578082-1"><span class="crayon-e">set_system_gate</span><span class="crayon-sy">(</span><span class="crayon-cn">0x80</span><span class="crayon-sy">,</span><span class="crayon-o">&amp;</span><span class="crayon-v">system_call</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>宏展开后，变成了</p>
		<div id="crayon-5aa8b63c3001c128312405" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
_set_gate(&amp;idt[0x80],15,3,&amp;system_call);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c3001c128312405-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c3001c128312405-1"><span class="crayon-e">_set_gate</span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-v">idt</span><span class="crayon-sy">[</span><span class="crayon-cn">0x80</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-cn">15</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-sy">,</span><span class="crayon-o">&amp;</span><span class="crayon-v">system_call</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>第一个参数表示描述符的地址，0x80号中断的描述符地址就是&amp;idt[0x80] ， 第二个参数描述符类型，第三个参数是描述符特权级dpl，第四个参数是偏移地址</p>
<p>再展开，变成了</p>
		<div id="crayon-5aa8b63c30022992664274" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
__asm__ (
  "movw %%dx,%%ax\n\t"
  "movw %0,%%dx\n\t"
  "movl %%eax,%1\n\t"
  "movl %%edx,%2"
  :
  : "i" ((short) (0x8000+(3&lt;&lt;13)+(15&lt;&lt;8))), 
    "o" (*((char *) (&amp;idt[0x80]))), 
    "o" (*(4+(char *) (&amp;idt[0x80]))), 
    "d" ((char *) (&amp;system_call)),
    "a" (0x00080000)
);</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-1">1</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-2">2</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-3">3</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-4">4</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-5">5</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-6">6</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-7">7</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-8">8</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-9">9</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-10">10</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-11">11</div><div class="crayon-num" data-line="crayon-5aa8b63c30022992664274-12">12</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c30022992664274-1"><span class="crayon-r">__asm__</span><span class="crayon-h"> </span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"movw %%dx,%%ax\n\t"</span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"movw %0,%%dx\n\t"</span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"movl %%eax,%1\n\t"</span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-5"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"movl %%edx,%2"</span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-6"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-7"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"i"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-t">short</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0x8000</span><span class="crayon-o">+</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-o">&lt;&lt;</span><span class="crayon-cn">13</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-sy">(</span><span class="crayon-cn">15</span><span class="crayon-o">&lt;&lt;</span><span class="crayon-cn">8</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"o"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">*</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-v">idt</span><span class="crayon-sy">[</span><span class="crayon-cn">0x80</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"o"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">*</span><span class="crayon-sy">(</span><span class="crayon-cn">4</span><span class="crayon-o">+</span><span class="crayon-sy">(</span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-v">idt</span><span class="crayon-sy">[</span><span class="crayon-cn">0x80</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"d"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-v">system_call</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"a"</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0x00080000</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aa8b63c30022992664274-12"><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>IDT表的表项</p>
<p><a target="_blank" href="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/12/scrn20171221143357.png"><img class="alignnone size-full wp-image-3365" data-original="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/12/scrn20171221143357.png" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" alt="" width="559" height="68" /></a></p>
<noscript><img class="alignnone size-full wp-image-3365" src="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/12/scrn20171221143357.png" alt="" width="559" height="68" /></a></p></noscript>
<p>代码中两个&#8221;o&#8221; 分别是表项的低4个字节和高4个字节，序号是%1和%2</p>
<p>第一个输入  (short) (0x8000+(3&lt;&lt;13)+(15&lt;&lt;8)) 的二进制是</p>
<p>1110 1111 0000 0000</p>
<p>放到dx中，也就是edx的低2个字节，赋值给%2 ，也就是设置了</p>
<p><a target="_blank" href="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/12/scrn20171221144329.png"><img class="alignnone size-full wp-image-3366" data-original="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/12/scrn20171221144329.png" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" alt="" width="269" height="66" /></a></p>
<noscript><img class="alignnone size-full wp-image-3366" src="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/12/scrn20171221144329.png" alt="" width="269" height="66" /></a></p></noscript>
<p>而edx的高2个字节是system_call偏移地址的高2个字节</p>
<p>dex的低2个字节是system_call偏移地址的低2个字节，复制给ax（eax的低2个字节）</p>
<p>eax的高2个字节是0x0008</p>
<p>表项赋值为：</p>
<p><a target="_blank" href="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/12/scrn20171221145325.png"><img class="alignnone size-full wp-image-3367" data-original="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/12/scrn20171221145325.png" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" alt="" width="580" height="116" /></a></p>
<noscript><img class="alignnone size-full wp-image-3367" src="http://7d9rd6.com1.z0.glb.clouddn.com/wp-content/uploads/2017/12/scrn20171221145325.png" alt="" width="580" height="116" /></a></p></noscript>
<h3 id="system_call">system_call</h3>
<p>kernel/system</p>
		<div id="crayon-5aa8b63c3002a620652455" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
system_call:
	cmpl $nr_system_calls-1,%eax
	ja bad_sys_call
	push %ds
	push %es
	push %fs
	pushl %edx
	pushl %ecx		# push %ebx,%ecx,%edx as parameters
	pushl %ebx		# to the system call
	movl $0x10,%edx		# set up ds,es to kernel space
	mov %dx,%ds
	mov %dx,%es
	movl $0x17,%edx		# fs points to local data space
	mov %dx,%fs
	call sys_call_table(,%eax,4)
	pushl %eax
	movl current,%eax
	cmpl $0,state(%eax)		# state
	jne reschedule
	cmpl $0,counter(%eax)		# counter
	je reschedule
ret_from_sys_call:
	movl current,%eax		# task[0] cannot have signals
	cmpl task,%eax
	je 3f
	cmpw $0x0f,CS(%esp)		# was old code segment supervisor ?
	jne 3f
	cmpw $0x17,OLDSS(%esp)		# was stack segment = 0x17 ?
	jne 3f
	movl signal(%eax),%ebx
	movl blocked(%eax),%ecx
	notl %ecx
	andl %ebx,%ecx
	bsfl %ecx,%ecx
	je 3f
	btrl %ecx,%ebx
	movl %ebx,signal(%eax)
	incl %ecx
	pushl %ecx
	call do_signal
	popl %eax
3:	popl %eax
	popl %ebx
	popl %ecx
	popl %edx
	pop %fs
	pop %es
	pop %ds
	iret</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-1">1</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-2">2</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-3">3</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-4">4</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-5">5</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-6">6</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-7">7</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-8">8</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-9">9</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-10">10</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-11">11</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-12">12</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-13">13</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-14">14</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-15">15</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-16">16</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-17">17</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-18">18</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-19">19</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-20">20</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-21">21</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-22">22</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-23">23</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-24">24</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-25">25</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-26">26</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-27">27</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-28">28</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-29">29</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-30">30</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-31">31</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-32">32</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-33">33</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-34">34</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-35">35</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-36">36</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-37">37</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-38">38</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-39">39</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-40">40</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-41">41</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-42">42</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-43">43</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-44">44</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-45">45</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-46">46</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-47">47</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-48">48</div><div class="crayon-num" data-line="crayon-5aa8b63c3002a620652455-49">49</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-1"><span class="crayon-r ">system_call</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-2"><span class="crayon-r ">	cmpl</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v ">nr</span><span class="crayon-sy">_</span><span class="crayon-v ">system</span><span class="crayon-sy">_</span><span class="crayon-v ">calls</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-v ">%eax</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-3"><span class="crayon-r ">	ja</span><span class="crayon-h"> </span><span class="crayon-v ">bad</span><span class="crayon-sy">_</span><span class="crayon-v ">sys</span><span class="crayon-sy">_</span><span class="crayon-v ">call</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-4"><span class="crayon-r ">	push</span><span class="crayon-h"> </span><span class="crayon-v ">%ds</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-5"><span class="crayon-r ">	push</span><span class="crayon-h"> </span><span class="crayon-v ">%es</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-6"><span class="crayon-r ">	push</span><span class="crayon-h"> </span><span class="crayon-v ">%fs</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-7"><span class="crayon-r ">	pushl</span><span class="crayon-h"> </span><span class="crayon-v ">%edx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-8"><span class="crayon-r ">	pushl</span><span class="crayon-h"> </span><span class="crayon-v ">%ecx</span><span class="crayon-h">		</span><span class="crayon-o">#</span><span class="crayon-h"> </span><span class="crayon-v ">push</span><span class="crayon-h"> </span><span class="crayon-v ">%ebx</span><span class="crayon-sy">,</span><span class="crayon-v ">%ecx</span><span class="crayon-sy">,</span><span class="crayon-v ">%edx</span><span class="crayon-h"> </span><span class="crayon-v ">as</span><span class="crayon-h"> </span><span class="crayon-v ">parameters</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-9"><span class="crayon-r ">	pushl</span><span class="crayon-h"> </span><span class="crayon-v ">%ebx</span><span class="crayon-h">		</span><span class="crayon-o">#</span><span class="crayon-h"> </span><span class="crayon-v ">to</span><span class="crayon-h"> </span><span class="crayon-v ">the</span><span class="crayon-h"> </span><span class="crayon-v ">system</span><span class="crayon-h"> </span><span class="crayon-v ">call</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-10"><span class="crayon-r ">	movl</span><span class="crayon-h"> </span><span class="crayon-cn">$0x10</span><span class="crayon-sy">,</span><span class="crayon-v ">%edx</span><span class="crayon-h">		</span><span class="crayon-o">#</span><span class="crayon-h"> </span><span class="crayon-v ">set</span><span class="crayon-h"> </span><span class="crayon-v ">up</span><span class="crayon-h"> </span><span class="crayon-v ">ds</span><span class="crayon-sy">,</span><span class="crayon-v ">es</span><span class="crayon-h"> </span><span class="crayon-v ">to</span><span class="crayon-h"> </span><span class="crayon-v ">kernel</span><span class="crayon-h"> </span><span class="crayon-v ">space</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-11"><span class="crayon-r ">	mov</span><span class="crayon-h"> </span><span class="crayon-v ">%dx</span><span class="crayon-sy">,</span><span class="crayon-v ">%ds</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-12"><span class="crayon-r ">	mov</span><span class="crayon-h"> </span><span class="crayon-v ">%dx</span><span class="crayon-sy">,</span><span class="crayon-v ">%es</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-13"><span class="crayon-r ">	movl</span><span class="crayon-h"> </span><span class="crayon-cn">$0x17</span><span class="crayon-sy">,</span><span class="crayon-v ">%edx</span><span class="crayon-h">		</span><span class="crayon-o">#</span><span class="crayon-h"> </span><span class="crayon-v ">fs</span><span class="crayon-h"> </span><span class="crayon-v ">points</span><span class="crayon-h"> </span><span class="crayon-v ">to</span><span class="crayon-h"> </span><span class="crayon-v ">local</span><span class="crayon-h"> </span><span class="crayon-v ">data</span><span class="crayon-h"> </span><span class="crayon-v ">space</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-14"><span class="crayon-r ">	mov</span><span class="crayon-h"> </span><span class="crayon-v ">%dx</span><span class="crayon-sy">,</span><span class="crayon-v ">%fs</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-15"><span class="crayon-r ">	call</span><span class="crayon-h"> </span><span class="crayon-v ">sys</span><span class="crayon-sy">_</span><span class="crayon-v ">call</span><span class="crayon-sy">_</span><span class="crayon-v ">table</span><span class="crayon-sy">(</span><span class="crayon-sy">,</span><span class="crayon-v ">%eax</span><span class="crayon-sy">,</span><span class="crayon-cn">4</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-16"><span class="crayon-r ">	pushl</span><span class="crayon-h"> </span><span class="crayon-v ">%eax</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-17"><span class="crayon-r ">	movl</span><span class="crayon-h"> </span><span class="crayon-v ">current</span><span class="crayon-sy">,</span><span class="crayon-v ">%eax</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-18"><span class="crayon-r ">	cmpl</span><span class="crayon-h"> </span><span class="crayon-cn">$0</span><span class="crayon-sy">,</span><span class="crayon-v ">state</span><span class="crayon-sy">(</span><span class="crayon-v ">%eax</span><span class="crayon-sy">)</span><span class="crayon-h">		</span><span class="crayon-o">#</span><span class="crayon-h"> </span><span class="crayon-v ">state</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-19"><span class="crayon-r ">	jne</span><span class="crayon-h"> </span><span class="crayon-v ">reschedule</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-20"><span class="crayon-r ">	cmpl</span><span class="crayon-h"> </span><span class="crayon-cn">$0</span><span class="crayon-sy">,</span><span class="crayon-v ">counter</span><span class="crayon-sy">(</span><span class="crayon-v ">%eax</span><span class="crayon-sy">)</span><span class="crayon-h">		</span><span class="crayon-o">#</span><span class="crayon-h"> </span><span class="crayon-v ">counter</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-21"><span class="crayon-r ">	je</span><span class="crayon-h"> </span><span class="crayon-v ">reschedule</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-22"><span class="crayon-r ">ret_from_sys_call</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-23"><span class="crayon-r ">	movl</span><span class="crayon-h"> </span><span class="crayon-v ">current</span><span class="crayon-sy">,</span><span class="crayon-v ">%eax</span><span class="crayon-h">		</span><span class="crayon-o">#</span><span class="crayon-h"> </span><span class="crayon-v ">task</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v ">cannot</span><span class="crayon-h"> </span><span class="crayon-v ">have</span><span class="crayon-h"> </span><span class="crayon-v ">signals</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-24"><span class="crayon-r ">	cmpl</span><span class="crayon-h"> </span><span class="crayon-v ">task</span><span class="crayon-sy">,</span><span class="crayon-v ">%eax</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-25"><span class="crayon-r ">	je</span><span class="crayon-h"> </span><span class="crayon-cn">3f</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-26"><span class="crayon-r ">	cmpw</span><span class="crayon-h"> </span><span class="crayon-cn">$0x0f</span><span class="crayon-sy">,</span><span class="crayon-v ">CS</span><span class="crayon-sy">(</span><span class="crayon-v ">%esp</span><span class="crayon-sy">)</span><span class="crayon-h">		</span><span class="crayon-o">#</span><span class="crayon-h"> </span><span class="crayon-v ">was</span><span class="crayon-h"> </span><span class="crayon-v ">old</span><span class="crayon-h"> </span><span class="crayon-v ">code</span><span class="crayon-h"> </span><span class="crayon-v ">segment</span><span class="crayon-h"> </span><span class="crayon-v ">supervisor</span><span class="crayon-h"> </span><span class="crayon-sy">?</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-27"><span class="crayon-r ">	jne</span><span class="crayon-h"> </span><span class="crayon-cn">3f</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-28"><span class="crayon-r ">	cmpw</span><span class="crayon-h"> </span><span class="crayon-cn">$0x17</span><span class="crayon-sy">,</span><span class="crayon-v ">OLDSS</span><span class="crayon-sy">(</span><span class="crayon-v ">%esp</span><span class="crayon-sy">)</span><span class="crayon-h">		</span><span class="crayon-o">#</span><span class="crayon-h"> </span><span class="crayon-v ">was</span><span class="crayon-h"> </span><span class="crayon-v ">stack</span><span class="crayon-h"> </span><span class="crayon-v ">segment</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0x17</span><span class="crayon-h"> </span><span class="crayon-sy">?</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-29"><span class="crayon-r ">	jne</span><span class="crayon-h"> </span><span class="crayon-cn">3f</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-30"><span class="crayon-r ">	movl</span><span class="crayon-h"> </span><span class="crayon-v ">signal</span><span class="crayon-sy">(</span><span class="crayon-v ">%eax</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-v ">%ebx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-31"><span class="crayon-r ">	movl</span><span class="crayon-h"> </span><span class="crayon-v ">blocked</span><span class="crayon-sy">(</span><span class="crayon-v ">%eax</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-v ">%ecx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-32"><span class="crayon-r ">	notl</span><span class="crayon-h"> </span><span class="crayon-v ">%ecx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-33"><span class="crayon-r ">	andl</span><span class="crayon-h"> </span><span class="crayon-v ">%ebx</span><span class="crayon-sy">,</span><span class="crayon-v ">%ecx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-34"><span class="crayon-r ">	bsfl</span><span class="crayon-h"> </span><span class="crayon-v ">%ecx</span><span class="crayon-sy">,</span><span class="crayon-v ">%ecx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-35"><span class="crayon-r ">	je</span><span class="crayon-h"> </span><span class="crayon-cn">3f</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-36"><span class="crayon-r ">	btrl</span><span class="crayon-h"> </span><span class="crayon-v ">%ecx</span><span class="crayon-sy">,</span><span class="crayon-v ">%ebx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-37"><span class="crayon-r ">	movl</span><span class="crayon-h"> </span><span class="crayon-v ">%ebx</span><span class="crayon-sy">,</span><span class="crayon-v ">signal</span><span class="crayon-sy">(</span><span class="crayon-v ">%eax</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-38"><span class="crayon-r ">	incl</span><span class="crayon-h"> </span><span class="crayon-v ">%ecx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-39"><span class="crayon-r ">	pushl</span><span class="crayon-h"> </span><span class="crayon-v ">%ecx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-40"><span class="crayon-r ">	call</span><span class="crayon-h"> </span><span class="crayon-v ">do</span><span class="crayon-sy">_</span><span class="crayon-v ">signal</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-41"><span class="crayon-r ">	popl</span><span class="crayon-h"> </span><span class="crayon-v ">%eax</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-42"><span class="crayon-r ">3</span><span class="crayon-o">:</span><span class="crayon-h">	</span><span class="crayon-v ">popl</span><span class="crayon-h"> </span><span class="crayon-v ">%eax</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-43"><span class="crayon-r ">	popl</span><span class="crayon-h"> </span><span class="crayon-v ">%ebx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-44"><span class="crayon-r ">	popl</span><span class="crayon-h"> </span><span class="crayon-v ">%ecx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-45"><span class="crayon-r ">	popl</span><span class="crayon-h"> </span><span class="crayon-v ">%edx</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-46"><span class="crayon-r ">	pop</span><span class="crayon-h"> </span><span class="crayon-v ">%fs</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-47"><span class="crayon-r ">	pop</span><span class="crayon-h"> </span><span class="crayon-v ">%es</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-48"><span class="crayon-r ">	pop</span><span class="crayon-h"> </span><span class="crayon-v ">%ds</span></div><div class="crayon-line" id="crayon-5aa8b63c3002a620652455-49"><span class="crayon-r ">	iret</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>通过 call sys_call_table(,%eax,4) ，call的是 sys_call_table + 4 * eax，4表示每个函数地址是4个字节。</p>
<p>sys_call_table是一个函数表，在 include/linux/sys.h中定义</p>
		<div id="crayon-5aa8b63c30031768821241" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 20px !important; line-height: 30px !important;">
		
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 20px !important; line-height: 30px !important;">
fn_ptr sys_call_table[] = { sys_setup, sys_exit, sys_fork, sys_read,
sys_write, sys_open, sys_close, sys_waitpid, sys_creat, sys_link,
sys_unlink, sys_execve, sys_chdir, sys_time, sys_mknod, sys_chmod,
sys_chown, sys_break, sys_stat, sys_lseek, sys_getpid, sys_mount,
sys_umount, sys_setuid, sys_getuid, sys_stime, sys_ptrace, sys_alarm,
sys_fstat, sys_pause, sys_utime, sys_stty, sys_gtty, sys_access,
sys_nice, sys_ftime, sys_sync, sys_kill, sys_rename, sys_mkdir,
sys_rmdir, sys_dup, sys_pipe, sys_times, sys_prof, sys_brk, sys_setgid,
sys_getgid, sys_signal, sys_geteuid, sys_getegid, sys_acct, sys_phys,
sys_lock, sys_ioctl, sys_fcntl, sys_mpx, sys_setpgid, sys_ulimit,
sys_uname, sys_umask, sys_chroot, sys_ustat, sys_dup2, sys_getppid,
sys_getpgrp, sys_setsid, sys_sigaction, sys_sgetmask, sys_ssetmask,
sys_setreuid,sys_setregid };</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 20px !important; line-height: 30px !important;"><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-1">1</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-2">2</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-3">3</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-4">4</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-5">5</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-6">6</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-7">7</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-8">8</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-9">9</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-10">10</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-11">11</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-12">12</div><div class="crayon-num" data-line="crayon-5aa8b63c30031768821241-13">13</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 20px !important; line-height: 30px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5aa8b63c30031768821241-1"><span class="crayon-e">fn_ptr </span><span class="crayon-v">sys_call_table</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-v">sys_setup</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_exit</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_fork</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_read</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-2"><span class="crayon-v">sys_write</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_open</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_close</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_waitpid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_creat</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_link</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-3"><span class="crayon-v">sys_unlink</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_execve</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_chdir</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_time</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_mknod</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_chmod</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-4"><span class="crayon-v">sys_chown</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_break</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_stat</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_lseek</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_getpid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_mount</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-5"><span class="crayon-v">sys_umount</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_setuid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_getuid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_stime</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_ptrace</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_alarm</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-6"><span class="crayon-v">sys_fstat</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_pause</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_utime</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_stty</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_gtty</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_access</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-7"><span class="crayon-v">sys_nice</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_ftime</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_sync</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_kill</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_rename</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_mkdir</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-8"><span class="crayon-v">sys_rmdir</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_dup</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_pipe</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_times</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_prof</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_brk</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_setgid</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-9"><span class="crayon-v">sys_getgid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_signal</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_geteuid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_getegid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_acct</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_phys</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-10"><span class="crayon-v">sys_lock</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_ioctl</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_fcntl</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_mpx</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_setpgid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_ulimit</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-11"><span class="crayon-v">sys_uname</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_umask</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_chroot</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_ustat</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_dup2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_getppid</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-12"><span class="crayon-v">sys_getpgrp</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_setsid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_sigaction</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_sgetmask</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sys_ssetmask</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5aa8b63c30031768821241-13"><span class="crayon-v">sys_setreuid</span><span class="crayon-sy">,</span><span class="crayon-v">sys</span><span class="crayon-sy">_</span>setregid<span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>write 的 调用号是4，和这里对应的。</p>
<p>&nbsp;</p>
			</div>
		</article>

		<div class="social-main">
			<div class="post-like">
			    <a href="javascript:;" data-action="ding" data-id="3361" class="specsZan ">点赞 <span class="count">
			        0</span>
			    </a>
			</div>

			<div class="reward-button"><a href="http://www.yalewoo.com/denote" target="_blank">赏</a> 
				<span class="reward-code">
					<span class="alipay-code"> <img class="alipay-img wdp-appear" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/alipay.png"><b>支付宝打赏</b> </span> <span class="wechat-code"> <img class="wechat-img wdp-appear" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/wechatpay.png"><b>微信打赏</b> </span>
				</span>
			</div>

			<div class="post-like">
			    <a id="fenxianganniu" onClick="show_bdsharebox();">分享
			    </a>
			</div>

			<div class="bdsharebuttonbox" id="bdsharebuttonbox">
				
			</div>
			

			

		</div>
		
		<div class="reward-notice">
			<p class="">如果文章对你有帮助，欢迎点赞或打赏（金额不限）。你的打赏将全部用于支付网站服务器费用和提高网站文章质量，谢谢支持。</p>
		</div>
		
			
		

		



		

		

		<div class="article-copyright">
                			<b> 版权声明: </b>
    			<p> 本文由 <a href="http://www.yalewoo.com/author/yalewoo" title="由yalewoo发布" rel="author">yalewoo</a> 原创，商业转载请联系作者获得授权。 <br>非商业转载请注明作者 <a href="http://www.yalewoo.com/author/yalewoo" title="由yalewoo发布" rel="author">yalewoo</a> 或 <a href="http://www.yalewoo.com/" title="雅乐网" ?>雅乐网</a> ，并附带本文链接：<br><a href="http://www.yalewoo.com/linux0_11_syscall.html" title=linux0.11系统调用，_syscall>http://www.yalewoo.com/linux0_11_syscall.html</a></p>
						</div>

		<div class="post-navigation">
			<div class="post-previous">
				<p>上一篇：</p>
				<a href="http://www.yalewoo.com/linux0-11_bootsect-s-setup-s_head-s.html" rel="prev">Linux0.11操作系统启动bootsect.s, setup.s, head.s, main.c</a>			</div>
			<div class="post-next">
				<p>下一篇：</p>
				<a href="http://www.yalewoo.com/qt-1-error-no-rule-to-make-target-cqtqt5-8-05-8mingw53_32binuic-exe-needed-by-ui_widget-h-stop.html" rel="next">Qt编译错误error: No rule to make target uic.exe, needed by &#8216;ui_widget.h&#8217;.  Stop.</a>			</div>
		</div>


		<div class="related_posts">
			<p>与  <a href="http://www.yalewoo.com/tag/linux" rel="tag">linux</a> 相关的文章</p>
			<ul>
										<li><a rel="bookmark" href="http://www.yalewoo.com/linux0-11_bootsect-s-setup-s_head-s.html" title="Linux0.11操作系统启动bootsect.s, setup.s, head.s, main.c" target="_blank">Linux0.11操作系统启动bootsect.s, setup.s, head.s, main.c</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/ubuntu1604_x64_install_x86_lib_gcc3-4_linux_0_11.html" title="ubuntu16.4(64位)编译运行32位程序，gcc3.4，编译linux.11源代码" target="_blank">ubuntu16.4(64位)编译运行32位程序，gcc3.4，编译linux.11源代码</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/virtualbox_ubuntu_raid.html" title="virtualbox下linux软件配置RAID" target="_blank">virtualbox下linux软件配置RAID</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/ubuntu_install_gcc-3-4.html" title="ubuntu安装低版本gcc-3.4（gcc-3.4-ubuntu.tar.gz百度云下载地址）" target="_blank">ubuntu安装低版本gcc-3.4（gcc-3.4-ubuntu.tar.gz百度云下载地址）</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/virtualbox_ubuntu_shared_fold.html" title="Virtualbox里的ubuntu设置共享文件夹" target="_blank">Virtualbox里的ubuntu设置共享文件夹</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/ubuntu_vi_wrong_arrow-keys.html" title="虚拟机里ubuntu下使用vi方向键和退格键乱码不能使用的解决办法" target="_blank">虚拟机里ubuntu下使用vi方向键和退格键乱码不能使用的解决办法</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/ubuntu_compile_kernel.html" title="ubuntu编译内核并添加系统调用(3.12版本)" target="_blank">ubuntu编译内核并添加系统调用(3.12版本)</a></li>
											<li><a rel="bookmark" href="http://www.yalewoo.com/linux_c_shared_memomy.html" title="Linux编程 共享内存的使用" target="_blank">Linux编程 共享内存的使用</a></li>
								</ul>
		</div>



		<div class="comments-template">
    		


<div id="comments" class="comments-area">

			<h3 class="comments-title">
		文章《linux0.11系统调用，_syscall》共有2条评论：
		</h3>

		
		<ol class="comment-list">
				<li class="comment even thread-even depth-1" id="li-comment-876">
		<div id="comment-876" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://2.gravatar.com/avatar/212859aa46b4c89973498c20d2c73765?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://2.gravatar.com/avatar/212859aa46b4c89973498c20d2c73765?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />
<noscript><img alt='' src='http://2.gravatar.com/avatar/212859aa46b4c89973498c20d2c73765?s=64&#038;d=identicon&#038;r=g' srcset='http://2.gravatar.com/avatar/212859aa46b4c89973498c20d2c73765?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				<a href='http://www.hezeye.com/'  target='_blank'>菏泽夜生活论坛</a>   				</div>
  				
  				<p>博客大好，让人忘不了！</p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/linux0_11_syscall.html#comment-876"><time datetime="2017-12-28T07:48:17+00:00">2017年12月28日 07:48</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/linux0_11_syscall.html?replytocom=876#respond' onclick='return addComment.moveForm( "comment-876", "876", "respond", "3361" )' aria-label='回复给菏泽夜生活论坛'>回复</a>				</span>
				</div>
			</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-894">
		<div id="comment-894" class="comment-one">
			<div class="comment-author-avatar">
  			<img alt='' data-original="http://1.gravatar.com/avatar/482538dc65e759336ff8e0e6ec29c325?s=64&#038;d=identicon&#038;r=g" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/img/loading.gif" srcset='http://1.gravatar.com/avatar/482538dc65e759336ff8e0e6ec29c325?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />
<noscript><img alt='' src='http://1.gravatar.com/avatar/482538dc65e759336ff8e0e6ec29c325?s=64&#038;d=identicon&#038;r=g' srcset='http://1.gravatar.com/avatar/482538dc65e759336ff8e0e6ec29c325?s=128&amp;d=identicon&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' /></noscript>			</div>
						<div class="comment-body">
				<div class="comment-author-name">
  				<a href='http://www.web.dabada.top/'  target='_blank'>八达网</a>   				</div>
  				
  				<p>新年好呀，新年好呀，祝福博主新年好！</p>
				
				<div class="comment-meta">

    				<a href="http://www.yalewoo.com/linux0_11_syscall.html#comment-894"><time datetime="2018-01-01T15:25:27+00:00">2018年1月1日 15:25</time></a>

				
								
				<span class="reply">
					<a rel='nofollow' class='comment-reply-link' href='http://www.yalewoo.com/linux0_11_syscall.html?replytocom=894#respond' onclick='return addComment.moveForm( "comment-894", "894", "respond", "3361" )' aria-label='回复给八达网'>回复</a>				</span>
				</div>
			</div>
		</div>
	</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">我要评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/linux0_11_syscall.html#respond" style="display:none;">取消回复</a></small></h3>			<form action="http://www.yalewoo.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-form-comment"><textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p>

<script type="text/javascript" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/show_smilies.js"></script>

<div class="ylw_comment_toolbar">
<a class="button-insert-smilies" id="button-insert-smilies" title="插入表情" onClick="show_smilies();"></a>
</div>

<div class="ylw_smilies_box_wrapper">
<div class="ylw_smilies_box" id="ylw_smilies_box">




</div>

</div><div class="comment-name-email-url"><p class="comment-form-author"><label for="author">姓名</label><input id="author" name="author" type="text" value="" size="30" />  </p>
<p class="comment-form-email"><label for="email">邮箱</label><input id="email" name="email" type="text" value="" size="30" /> </p>
<p class="comment-form-url"><label for="url">网址</label><input id="url" name="url" type="text" value="" size="30"  /></p></div><div class='comment_yzm'>验证码*： 2 + 0 = <input type='text' name='sum' class='math_textfield'  required='required' value='' size='25' tabindex='4'><input type='hidden' name='num1' value='2'><input type='hidden' name='num2' value='0'></div><div class="comment-right"><div class="comment-submit-button">
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论" /> <input type='hidden' name='comment_post_ID' value='3361' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p></div><div class="ylw_comment_notifyme"><input type="checkbox" name="comment_mail_notify" id="comment_mail_notify" value="comment_mail_notify" checked="checked" style="margin-left:20px;" /><label for="comment_mail_notify">有人回复时邮件通知我</label></div></div></div><div class="clear"></div>			</form>
			</div><!-- #respond -->
	
</div><!-- .comments-area -->

		</div>  


        
		
			
	</section>
	


	</div>
<footer id="footer">
      Copyright &copy;   <a title="雅乐网" href="http://www.yalewoo.com">雅乐网</a>  /<a title="自豪地采用WordPress" href="https://cn.wordpress.org" target="_blank">WordPress</a> / <a title="YLW3.0主题" href="http://www.yalewoo.com/ylw3.html" target="_blank">YLW3.0</a>  /  <a title="老薛主机" href="https://my.laoxuehost.net/aff.php?aff=2518" target="_blank">老薛主机</a>  /  <a title="七牛云存储" href="https://portal.qiniu.com/signup?code=3li1yeb2ph1ea" target="_black">七牛云存储</a>

      <div id="footer_menu">
      	<div class="menu-%e5%ba%95%e9%83%a8-container"><ul id="menu-%e5%ba%95%e9%83%a8" class="menu"><li id="menu-item-655" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-655"><a target="_blank" href="http://www.yalewoo.com/sitemap.xml">站点地图</a></li>
</ul></div>      </div>
      <div id="cnzztongji">
      	

		<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1252889774'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s5.cnzz.com/stat.php%3Fid%3D1252889774%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>

    

		<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e937132d7f7e86dfb5300ce1ab2c25f7";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



		</div>
</footer>

<script type="text/javascript" src="http://www.yalewoo.com/wp-content/themes/YLW3_lite/js/backtop.js"></script>

<script type='text/javascript' src='http://www.yalewoo.com/wp-includes/js/comment-reply.min.js?ver=4.7.9'></script>



</body>
</html>
<!-- Dynamic page generated in 1.326 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2018-03-14 13:42:20 -->

<!-- Compression = gzip -->
<!-- super cache -->